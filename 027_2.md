# Фильтрация трафика - firewalld, iptables

Сценарии iptables:
* реализовать knocking port
* centralRouter может попасть на ssh inetRouter через knock скрипт пример в материалах.
* добавить inetRouter2, который виден(маршрутизируется (host-only тип сети для виртуалки)) с хоста или форвардится порт через локалхост.
* запустить nginx на centralServer.
* пробросить 80й порт на inetRouter2 8080.
* дефолт в инет оставить через inetRouter.

Формат сдачи ДЗ - vagrant + ansible
* реализовать проход на 80й порт без маскарадинга

Критерии оценки:

Статус "Принято" ставится при выполнении всех основных условий.
Рекомендуем сдать до: 16.08.2021

## Исполнение

[Vagrantfile](./027_2/vm/Vagrantfile)

<details><summary>см. Vagrantfile</summary>

```text
# -*- mode: ruby -*-
# vim: set ft=ruby :

MACHINES = {
    :inetRouter => {
        :box_name => "centos/7",
        # :public => {:ip => '10.10.10.1', :adapter => 1, :bridge => "enp4s0"},
        :net => [
            {ip: '192.168.255.1',   adapter: 2, netmask: "255.255.255.240", virtualbox__intnet: "inet-router-net"},
        ]
    },
    :inetRouterSecond => {
        :box_name => "centos/7",
        :net => [
            {ip: '192.168.255.3',   adapter: 2, netmask: "255.255.255.240", virtualbox__intnet: "inet-router-net"},
        ]
    },
    :centralRouter => {
        :box_name => "centos/7",
        :net => [
            {ip: '192.168.255.2',   adapter: 2, netmask: "255.255.255.240", virtualbox__intnet: "inet-router-net"},
            {ip: '192.168.0.1',     adapter: 3, netmask: "255.255.255.252", virtualbox__intnet: "central-router-net"},
        ]
    },
    :centralServer => {
        :box_name => "centos/7",
        :net => [
            {ip: '192.168.0.2',     adapter: 2, netmask: "255.255.255.252", virtualbox__intnet: "central-router-net"},
        ]
    },
}

Vagrant.configure("2") do |config|

    MACHINES.each do |boxname, boxconfig|
        config.gatling.rsync_on_startup = false
        config.vm.define boxname do |box|
            box.vm.provision "shell", run: "always", inline: <<-SHELL

                systemctl stop NetworkManager    # <--- No once anymore
                systemctl disable NetworkManager # <--- No once anymore
                systemctl enable network.service
                systemctl start network.service

                yum install -y traceroute
                yum install -y nano
            SHELL

            case boxname.to_s
            when "inetRouterSecond"
                box.vm.network 'forwarded_port', guest: 8080, host: 8080, host_ip: '127.0.0.1'
            end

            config.vm.provider "virtualbox" do |v|
                v.memory = 256
                v.cpus = 1
            end

            box.vm.box = boxconfig[:box_name]
            box.vm.host_name = boxname.to_s

            boxconfig[:net].each do |ipconf|
                box.vm.network "private_network", ipconf
            end

            if boxconfig.key?(:public)
                box.vm.network "public_network", boxconfig[:public]
            end

            box.vm.provision "shell", inline: <<-SHELL
                mkdir -p ~root/.ssh
                cp ~vagrant/.ssh/auth* ~root/.ssh
            SHELL

        end
    end
end

```

</details>

Ключевым моментом проверки доступности Web-сервера через inetRouterSecond является
```shell
case boxname.to_s
when "inetRouterSecond"
    box.vm.network 'forwarded_port', guest: 8080, host: 8080, host_ip: '127.0.0.1'
end
```

Разворачивание инфраструктуры

```shell
pwd
# ./027_2/vm

vagrant destroy -f && vagrant up 
# ...

python3 v2a.py -o ../ansible/inventories/hosts

cd ../ansible/
pwd
# ./027_2/ansible
    
```

Шлюзы по-умолчанию, маршруты, форвардинг:

```shell
ansible-playbook playbooks/routing.yml > ../files/playbooks_routing.txt
```


<details><summary>см. лог playbooks/routing.yml</summary>

```text

PLAY [Playbook of ethX gateway config] *****************************************

TASK [Gathering Facts] *********************************************************
ok: [centralServer]
ok: [inetRouter]
ok: [centralRouter]
ok: [inetRouterSecond]

TASK [../roles/routing : /etc/sysconfig/network | "NOZEROCONF=yes" | I don't want 169.254.0.0/16 network at default] ***
changed: [centralRouter]
changed: [centralServer]
changed: [inetRouter]
changed: [inetRouterSecond]

TASK [../roles/routing : /etc/sysconfig/network-scripts/route-* | delete route files] ***
changed: [inetRouterSecond]
changed: [centralRouter]
changed: [inetRouter]
changed: [centralServer]

TASK [../roles/routing : /etc/sysconfig/network-scripts/route-* | create needed route files] ***
changed: [inetRouterSecond] => (item={'interface': 'eth1', 'nw': '192.168.0.0/24', 'via': '192.168.255.2'})
changed: [inetRouter] => (item={'interface': 'eth1', 'nw': '192.168.0.0/24', 'via': '192.168.255.2'})

TASK [../roles/routing : /etc/sysconfig/network-scripts/route-* | set route] ***
changed: [inetRouterSecond] => (item={'interface': 'eth1', 'nw': '192.168.0.0/24', 'via': '192.168.255.2'})
changed: [inetRouter] => (item={'interface': 'eth1', 'nw': '192.168.0.0/24', 'via': '192.168.255.2'})

TASK [../roles/routing : /etc/sysconfig/network-scripts/ifcfg-ethX | content] ***
changed: [centralServer]
changed: [inetRouterSecond]
changed: [inetRouter]
changed: [centralRouter]

TASK [../roles/routing : /etc/sysconfig/network-scripts/ifcfg-ethX | GATEWAY=<ip> | set up if did not set] ***
skipping: [inetRouter]
changed: [centralRouter]
changed: [centralServer]
changed: [inetRouterSecond]

TASK [../roles/routing : /etc/sysconfig/network-scripts/ifcfg-ethX | GATEWAY=<ip> | replace] ***
skipping: [inetRouter]
skipping: [inetRouterSecond]
skipping: [centralRouter]
skipping: [centralServer]

TASK [../roles/routing : /etc/sysconfig/network-scripts/ifcfg-eth0 | content] ***
changed: [inetRouter]
changed: [centralRouter]
changed: [centralServer]
changed: [inetRouterSecond]

TASK [../roles/routing : /etc/sysconfig/network-scripts/ifcfg-eth0 | DEFROUTE=no | if did not set] ***
changed: [inetRouterSecond]
changed: [inetRouter]
changed: [centralRouter]
changed: [centralServer]

TASK [../roles/routing : /etc/sysconfig/network-scripts/ifcfg-eth0 | DEFROUTE=no | if "yes"] ***
ok: [centralServer]
ok: [centralRouter]
ok: [inetRouterSecond]
ok: [inetRouter]

TASK [../roles/routing : /etc/sysconfig/network-scripts/ifcfg-ethX | content] ***
changed: [inetRouter]
changed: [inetRouterSecond]
changed: [centralRouter]
changed: [centralServer]

TASK [../roles/routing : /etc/sysconfig/network-scripts/ifcfg-ethX | DEFROUTE=yes  | if did not set] ***
skipping: [inetRouter]
changed: [inetRouterSecond]
changed: [centralRouter]
changed: [centralServer]

TASK [../roles/routing : /etc/sysconfig/network-scripts/ifcfg-ethX | DEFROUTE=yes | if "no"] ***
skipping: [inetRouterSecond]
skipping: [centralRouter]
skipping: [centralServer]
changed: [inetRouter]

TASK [../roles/routing : /etc/sysctl.conf | content] ***************************
changed: [inetRouter]
changed: [centralServer]
changed: [centralRouter]
changed: [inetRouterSecond]

TASK [../roles/routing : /etc/sysctl.conf | forwarding set up | if does not yet] ***
skipping: [centralServer]
changed: [inetRouter]
changed: [inetRouterSecond]
changed: [centralRouter]

TASK [../roles/routing : /etc/sysctl.conf | forwarding set up | if it was early] ***
skipping: [inetRouter]
skipping: [inetRouterSecond]
skipping: [centralRouter]
skipping: [centralServer]

RUNNING HANDLER [../roles/routing : systemctl-restart-network] *****************
changed: [centralServer]
changed: [inetRouter]
changed: [inetRouterSecond]
changed: [centralRouter]

PLAY RECAP *********************************************************************
centralRouter              : ok=13   changed=11   unreachable=0    failed=0    skipped=5    rescued=0    ignored=0   
centralServer              : ok=12   changed=10   unreachable=0    failed=0    skipped=6    rescued=0    ignored=0   
inetRouter                 : ok=14   changed=12   unreachable=0    failed=0    skipped=4    rescued=0    ignored=0   
inetRouterSecond           : ok=15   changed=13   unreachable=0    failed=0    skipped=3    rescued=0    ignored=0   


```

</details>

Выходная нода (маскарадинг):

```shell
ansible-playbook playbooks/internet-router.yml  > ../files/playbooks_internet-router.txt
```


<details><summary>см. лог playbooks/internet-router.txt</summary>

```text

PLAY [Playbook of internet-node server initialization] *************************

TASK [Gathering Facts] *********************************************************
ok: [inetRouterSecond]
ok: [inetRouter]

TASK [../roles/internet-router : iptables masquerading] ************************
changed: [inetRouterSecond]
changed: [inetRouter]

PLAY RECAP *********************************************************************
inetRouter                 : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
inetRouterSecond           : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   


```

</details>

Промежуточный тест сетевой связности и проверка inetRouter как единой точки выхода во вне

```shell
# если не сделать, то после тук-тук-тук не попадем
ansible-playbook playbooks/test_001_network_connectivity.yml > ../files/playbooks_test_001_network_connectivity.txt
```


<details><summary>см. лог playbooks/test_001_network_connectivity.yml</summary>

```text

PLAY [Playbook of tests] *******************************************************

TASK [Gathering Facts] *********************************************************
ok: [inetRouterSecond]
ok: [centralServer]
ok: [inetRouter]
ok: [centralRouter]

TASK [../roles/test_001_network_connectivity : test | demostration] ************
ok: [inetRouter] => {
    "msg": "I am inetRouter"
}
ok: [inetRouterSecond] => {
    "msg": "I am inetRouterSecond"
}
ok: [centralRouter] => {
    "msg": "I am centralRouter"
}
ok: [centralServer] => {
    "msg": "I am centralServer"
}

TASK [../roles/test_001_network_connectivity : test | traceroute foreign host] ***
changed: [centralRouter] => (item=192.168.0.2)
changed: [centralServer] => (item=192.168.0.2)
changed: [inetRouterSecond] => (item=192.168.0.2)
changed: [inetRouter] => (item=192.168.0.2)
changed: [centralServer] => (item=192.168.0.1)
changed: [inetRouterSecond] => (item=192.168.0.1)
changed: [centralRouter] => (item=192.168.0.1)
changed: [inetRouter] => (item=192.168.0.1)
changed: [centralRouter] => (item=192.168.255.2)
changed: [centralRouter] => (item=192.168.255.1)
changed: [centralServer] => (item=192.168.255.2)
changed: [inetRouterSecond] => (item=192.168.255.2)
changed: [inetRouter] => (item=192.168.255.2)
changed: [centralServer] => (item=192.168.255.1)
changed: [inetRouterSecond] => (item=192.168.255.1)
changed: [inetRouter] => (item=192.168.255.1)
changed: [centralRouter] => (item=8.8.8.8)
changed: [inetRouterSecond] => (item=8.8.8.8)
changed: [centralServer] => (item=8.8.8.8)
changed: [inetRouter] => (item=8.8.8.8)

TASK [../roles/test_001_network_connectivity : test | result file output] ******
changed: [inetRouter -> localhost] => (item={'changed': True, 'end': '2021-09-04 19:38:10.941787', 'stdout': 'traceroute to 192.168.0.2 (192.168.0.2), 30 hops max, 60 byte packets\n 1  192.168.255.2 (192.168.255.2)  0.396 ms  0.399 ms  0.425 ms\n 2  192.168.0.2 (192.168.0.2)  3.763 ms  3.473 ms  3.317 ms', 'cmd': 'traceroute 192.168.0.2', 'rc': 0, 'start': '2021-09-04 19:38:10.810829', 'stderr': '', 'delta': '0:00:00.130958', 'invocation': {'module_args': {'creates': None, 'executable': None, '_uses_shell': True, 'strip_empty_ends': True, '_raw_params': 'traceroute 192.168.0.2', 'removes': None, 'argv': None, 'warn': False, 'chdir': None, 'stdin_add_newline': True, 'stdin': None}}, 'stdout_lines': ['traceroute to 192.168.0.2 (192.168.0.2), 30 hops max, 60 byte packets', ' 1  192.168.255.2 (192.168.255.2)  0.396 ms  0.399 ms  0.425 ms', ' 2  192.168.0.2 (192.168.0.2)  3.763 ms  3.473 ms  3.317 ms'], 'stderr_lines': [], 'failed': False, 'item': '192.168.0.2', 'ansible_loop_var': 'item'})
changed: [inetRouter -> localhost] => (item={'changed': True, 'end': '2021-09-04 19:38:12.143778', 'stdout': 'traceroute to 192.168.0.1 (192.168.0.1), 30 hops max, 60 byte packets\n 1  192.168.0.1 (192.168.0.1)  0.311 ms  0.376 ms  0.375 ms', 'cmd': 'traceroute 192.168.0.1', 'rc': 0, 'start': '2021-09-04 19:38:12.083237', 'stderr': '', 'delta': '0:00:00.060541', 'invocation': {'module_args': {'creates': None, 'executable': None, '_uses_shell': True, 'strip_empty_ends': True, '_raw_params': 'traceroute 192.168.0.1', 'removes': None, 'argv': None, 'warn': False, 'chdir': None, 'stdin_add_newline': True, 'stdin': None}}, 'stdout_lines': ['traceroute to 192.168.0.1 (192.168.0.1), 30 hops max, 60 byte packets', ' 1  192.168.0.1 (192.168.0.1)  0.311 ms  0.376 ms  0.375 ms'], 'stderr_lines': [], 'failed': False, 'item': '192.168.0.1', 'ansible_loop_var': 'item'})
changed: [inetRouter -> localhost] => (item={'changed': True, 'end': '2021-09-04 19:38:18.218827', 'stdout': 'traceroute to 192.168.255.2 (192.168.255.2), 30 hops max, 60 byte packets\n 1  192.168.255.2 (192.168.255.2)  0.432 ms * *', 'cmd': 'traceroute 192.168.255.2', 'rc': 0, 'start': '2021-09-04 19:38:13.159943', 'stderr': '', 'delta': '0:00:05.058884', 'invocation': {'module_args': {'creates': None, 'executable': None, '_uses_shell': True, 'strip_empty_ends': True, '_raw_params': 'traceroute 192.168.255.2', 'removes': None, 'argv': None, 'warn': False, 'chdir': None, 'stdin_add_newline': True, 'stdin': None}}, 'stdout_lines': ['traceroute to 192.168.255.2 (192.168.255.2), 30 hops max, 60 byte packets', ' 1  192.168.255.2 (192.168.255.2)  0.432 ms * *'], 'stderr_lines': [], 'failed': False, 'item': '192.168.255.2', 'ansible_loop_var': 'item'})
changed: [inetRouter -> localhost] => (item={'changed': True, 'end': '2021-09-04 19:38:19.159157', 'stdout': 'traceroute to 192.168.255.1 (192.168.255.1), 30 hops max, 60 byte packets\n 1  inetRouter (192.168.255.1)  0.072 ms  0.037 ms  0.034 ms', 'cmd': 'traceroute 192.168.255.1', 'rc': 0, 'start': '2021-09-04 19:38:19.102148', 'stderr': '', 'delta': '0:00:00.057009', 'invocation': {'module_args': {'creates': None, 'executable': None, '_uses_shell': True, 'strip_empty_ends': True, '_raw_params': 'traceroute 192.168.255.1', 'removes': None, 'argv': None, 'warn': False, 'chdir': None, 'stdin_add_newline': True, 'stdin': None}}, 'stdout_lines': ['traceroute to 192.168.255.1 (192.168.255.1), 30 hops max, 60 byte packets', ' 1  inetRouter (192.168.255.1)  0.072 ms  0.037 ms  0.034 ms'], 'stderr_lines': [], 'failed': False, 'item': '192.168.255.1', 'ansible_loop_var': 'item'})
changed: [inetRouter -> localhost] => (item={'changed': True, 'end': '2021-09-04 19:38:35.994726', 'stdout': 'traceroute to 8.8.8.8 (8.8.8.8), 30 hops max, 60 byte packets\n 1  gateway (10.0.2.2)  0.553 ms  0.310 ms  0.232 ms\n 2  * * *\n 3  * * *\n 4  mrsk-bras5.sz.ip.rostelecom.ru (212.48.195.203)  16.724 ms  16.630 ms  16.689 ms\n 5  pos14-0-0-s16.E320-1-VLGD.nwtelecom.ru (212.48.194.218)  16.624 ms 212.48.194.212 (212.48.194.212)  16.640 ms  16.622 ms\n 6  188.254.2.6 (188.254.2.6)  45.200 ms  51.196 ms 188.254.2.4 (188.254.2.4)  50.365 ms\n 7  87.226.194.47 (87.226.194.47)  49.068 ms  49.298 ms  48.762 ms\n 8  74.125.244.180 (74.125.244.180)  49.138 ms  48.905 ms 74.125.244.132 (74.125.244.132)  49.180 ms\n 9  72.14.232.85 (72.14.232.85)  47.944 ms 142.251.61.219 (142.251.61.219)  48.391 ms 216.239.48.163 (216.239.48.163)  27.077 ms\n10  216.239.49.113 (216.239.49.113)  32.377 ms 142.251.61.221 (142.251.61.221)  32.080 ms 142.250.56.15 (142.250.56.15)  30.485 ms\n11  216.239.42.23 (216.239.42.23)  32.510 ms 142.250.232.179 (142.250.232.179)  39.846 ms *\n12  * * *\n13  * * *\n14  * * *\n15  * * *\n16  * * *\n17  * * *\n18  * * *\n19  * * *\n20  * * *\n21  * dns.google (8.8.8.8)  36.440 ms  36.398 ms', 'cmd': 'traceroute 8.8.8.8', 'rc': 0, 'start': '2021-09-04 19:38:19.984716', 'stderr': '', 'delta': '0:00:16.010010', 'invocation': {'module_args': {'creates': None, 'executable': None, '_uses_shell': True, 'strip_empty_ends': True, '_raw_params': 'traceroute 8.8.8.8', 'removes': None, 'argv': None, 'warn': False, 'chdir': None, 'stdin_add_newline': True, 'stdin': None}}, 'stdout_lines': ['traceroute to 8.8.8.8 (8.8.8.8), 30 hops max, 60 byte packets', ' 1  gateway (10.0.2.2)  0.553 ms  0.310 ms  0.232 ms', ' 2  * * *', ' 3  * * *', ' 4  mrsk-bras5.sz.ip.rostelecom.ru (212.48.195.203)  16.724 ms  16.630 ms  16.689 ms', ' 5  pos14-0-0-s16.E320-1-VLGD.nwtelecom.ru (212.48.194.218)  16.624 ms 212.48.194.212 (212.48.194.212)  16.640 ms  16.622 ms', ' 6  188.254.2.6 (188.254.2.6)  45.200 ms  51.196 ms 188.254.2.4 (188.254.2.4)  50.365 ms', ' 7  87.226.194.47 (87.226.194.47)  49.068 ms  49.298 ms  48.762 ms', ' 8  74.125.244.180 (74.125.244.180)  49.138 ms  48.905 ms 74.125.244.132 (74.125.244.132)  49.180 ms', ' 9  72.14.232.85 (72.14.232.85)  47.944 ms 142.251.61.219 (142.251.61.219)  48.391 ms 216.239.48.163 (216.239.48.163)  27.077 ms', '10  216.239.49.113 (216.239.49.113)  32.377 ms 142.251.61.221 (142.251.61.221)  32.080 ms 142.250.56.15 (142.250.56.15)  30.485 ms', '11  216.239.42.23 (216.239.42.23)  32.510 ms 142.250.232.179 (142.250.232.179)  39.846 ms *', '12  * * *', '13  * * *', '14  * * *', '15  * * *', '16  * * *', '17  * * *', '18  * * *', '19  * * *', '20  * * *', '21  * dns.google (8.8.8.8)  36.440 ms  36.398 ms'], 'stderr_lines': [], 'failed': False, 'item': '8.8.8.8', 'ansible_loop_var': 'item'})

PLAY RECAP *********************************************************************
centralRouter              : ok=3    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
centralServer              : ok=3    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
inetRouter                 : ok=4    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
inetRouterSecond           : ok=3    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   


```

</details>

* промежуточный тест доступности 192.168.0.1


<details><summary>см. со стороны centralServer</summary>

```text
traceroute to 192.168.0.1 (192.168.0.1), 30 hops max, 60 byte packets
 1  192.168.0.1 (192.168.0.1)  0.420 ms  0.469 ms  0.336 ms
traceroute to 192.168.0.1 (192.168.0.1), 30 hops max, 60 byte packets
 1  gateway (192.168.0.1)  0.496 ms  0.153 ms  0.288 ms
traceroute to 192.168.0.1 (192.168.0.1), 30 hops max, 60 byte packets
 1  gateway (192.168.0.1)  0.432 ms  0.282 ms  0.279 ms
traceroute to 192.168.0.1 (192.168.0.1), 30 hops max, 60 byte packets
 1  gateway (192.168.0.1)  2.252 ms  2.443 ms  2.246 ms
traceroute to 192.168.0.1 (192.168.0.1), 30 hops max, 60 byte packets
 1  gateway (192.168.0.1)  0.531 ms  0.366 ms  4.595 ms
traceroute to 192.168.0.1 (192.168.0.1), 30 hops max, 60 byte packets
 1  gateway (192.168.0.1)  0.390 ms  0.271 ms  0.652 ms
traceroute to 192.168.0.1 (192.168.0.1), 30 hops max, 60 byte packets
 1  gateway (192.168.0.1)  0.419 ms  0.377 ms  0.745 ms
traceroute to 192.168.0.1 (192.168.0.1), 30 hops max, 60 byte packets
 1  gateway (192.168.0.1)  0.597 ms  1.837 ms  0.582 ms
traceroute to 192.168.0.1 (192.168.0.1), 30 hops max, 60 byte packets
 1  gateway (192.168.0.1)  0.390 ms  0.151 ms  0.479 ms
traceroute to 192.168.0.1 (192.168.0.1), 30 hops max, 60 byte packets
 1  gateway (192.168.0.1)  0.547 ms  0.439 ms  0.363 ms
traceroute to 192.168.0.1 (192.168.0.1), 30 hops max, 60 byte packets
 1  gateway (192.168.0.1)  0.395 ms  0.266 ms  0.362 ms
traceroute to 192.168.0.1 (192.168.0.1), 30 hops max, 60 byte packets
 1  gateway (192.168.0.1)  1.248 ms  0.358 ms  0.228 ms
traceroute to 192.168.0.1 (192.168.0.1), 30 hops max, 60 byte packets
 1  gateway (192.168.0.1)  1.780 ms  0.325 ms  0.275 ms

```

</details>

<details><summary>см. со стороны centralRouter</summary>

```text
traceroute to 192.168.0.1 (192.168.0.1), 30 hops max, 60 byte packets
 1  centralRouter (192.168.0.1)  0.038 ms  0.013 ms  0.018 ms
traceroute to 192.168.0.1 (192.168.0.1), 30 hops max, 60 byte packets
 1  centralRouter (192.168.0.1)  0.047 ms  0.022 ms  0.017 ms
traceroute to 192.168.0.1 (192.168.0.1), 30 hops max, 60 byte packets
 1  centralRouter (192.168.0.1)  0.036 ms  0.014 ms  0.013 ms
traceroute to 192.168.0.1 (192.168.0.1), 30 hops max, 60 byte packets
 1  centralRouter (192.168.0.1)  0.044 ms  0.018 ms  0.018 ms
traceroute to 192.168.0.1 (192.168.0.1), 30 hops max, 60 byte packets
 1  centralRouter (192.168.0.1)  0.047 ms  0.022 ms  0.022 ms
traceroute to 192.168.0.1 (192.168.0.1), 30 hops max, 60 byte packets
 1  centralRouter (192.168.0.1)  0.047 ms  0.020 ms  0.018 ms
traceroute to 192.168.0.1 (192.168.0.1), 30 hops max, 60 byte packets
 1  centralRouter (192.168.0.1)  0.046 ms  0.019 ms  0.018 ms
traceroute to 192.168.0.1 (192.168.0.1), 30 hops max, 60 byte packets
 1  centralRouter (192.168.0.1)  0.050 ms  0.021 ms  0.021 ms
traceroute to 192.168.0.1 (192.168.0.1), 30 hops max, 60 byte packets
 1  centralRouter (192.168.0.1)  0.049 ms  0.042 ms  0.022 ms
traceroute to 192.168.0.1 (192.168.0.1), 30 hops max, 60 byte packets
 1  centralRouter (192.168.0.1)  0.055 ms  0.026 ms  0.023 ms
traceroute to 192.168.0.1 (192.168.0.1), 30 hops max, 60 byte packets
 1  centralRouter (192.168.0.1)  0.049 ms  0.023 ms  0.332 ms
traceroute to 192.168.0.1 (192.168.0.1), 30 hops max, 60 byte packets
 1  centralRouter (192.168.0.1)  0.051 ms  0.022 ms  0.023 ms
traceroute to 192.168.0.1 (192.168.0.1), 30 hops max, 60 byte packets
 1  centralRouter (192.168.0.1)  0.046 ms  0.023 ms  0.022 ms

```

</details>

<details><summary>см. со стороны inetRouter</summary>

```text
traceroute to 192.168.0.1 (192.168.0.1), 30 hops max, 60 byte packets
 1  192.168.0.1 (192.168.0.1)  0.311 ms  0.376 ms  0.375 ms
```

</details>

<details><summary>см. со стороны inetRouterSecond</summary>

```text
traceroute to 192.168.0.1 (192.168.0.1), 30 hops max, 60 byte packets
 1  inetRouterSecond (192.168.255.3)  3003.820 ms !H  3003.454 ms !H  3003.382 ms !H
traceroute to 192.168.0.1 (192.168.0.1), 30 hops max, 60 byte packets
 1  inetRouterSecond (192.168.255.3)  3002.821 ms !H  3002.522 ms !H  3002.448 ms !H
traceroute to 192.168.0.1 (192.168.0.1), 30 hops max, 60 byte packets
 1  inetRouterSecond (192.168.255.3)  3000.014 ms !H  2999.680 ms !H  2999.602 ms !H
traceroute to 192.168.0.1 (192.168.0.1), 30 hops max, 60 byte packets
 1  192.168.0.1 (192.168.0.1)  0.706 ms  0.359 ms  0.560 ms
traceroute to 192.168.0.1 (192.168.0.1), 30 hops max, 60 byte packets
 1  192.168.0.1 (192.168.0.1)  1.812 ms  0.434 ms  0.372 ms
traceroute to 192.168.0.1 (192.168.0.1), 30 hops max, 60 byte packets
 1  192.168.0.1 (192.168.0.1)  0.503 ms  0.171 ms  0.274 ms
traceroute to 192.168.0.1 (192.168.0.1), 30 hops max, 60 byte packets
 1  192.168.0.1 (192.168.0.1)  0.441 ms  0.386 ms  0.574 ms
traceroute to 192.168.0.1 (192.168.0.1), 30 hops max, 60 byte packets
 1  192.168.0.1 (192.168.0.1)  0.422 ms  0.485 ms  0.477 ms
traceroute to 192.168.0.1 (192.168.0.1), 30 hops max, 60 byte packets
 1  192.168.0.1 (192.168.0.1)  6.978 ms  6.663 ms  6.425 ms
traceroute to 192.168.0.1 (192.168.0.1), 30 hops max, 60 byte packets
 1  192.168.0.1 (192.168.0.1)  0.404 ms  0.271 ms  0.293 ms

```

</details>

* промежуточный тес доступности 192.168.0.2


<details><summary>см. со стороны centralServer</summary>

```text
traceroute to 192.168.0.2 (192.168.0.2), 30 hops max, 60 byte packets
 1  centralServer (192.168.0.2)  0.038 ms  0.016 ms  0.014 ms
traceroute to 192.168.0.2 (192.168.0.2), 30 hops max, 60 byte packets
 1  centralServer (192.168.0.2)  0.037 ms  0.013 ms  0.013 ms
traceroute to 192.168.0.2 (192.168.0.2), 30 hops max, 60 byte packets
 1  centralServer (192.168.0.2)  0.047 ms  0.022 ms  0.020 ms
traceroute to 192.168.0.2 (192.168.0.2), 30 hops max, 60 byte packets
 1  centralServer (192.168.0.2)  0.044 ms  0.019 ms  0.017 ms
traceroute to 192.168.0.2 (192.168.0.2), 30 hops max, 60 byte packets
 1  centralServer (192.168.0.2)  0.050 ms  0.024 ms  0.022 ms
traceroute to 192.168.0.2 (192.168.0.2), 30 hops max, 60 byte packets
 1  centralServer (192.168.0.2)  0.037 ms  0.014 ms  0.013 ms
traceroute to 192.168.0.2 (192.168.0.2), 30 hops max, 60 byte packets
 1  centralServer (192.168.0.2)  0.054 ms  0.021 ms  0.029 ms
traceroute to 192.168.0.2 (192.168.0.2), 30 hops max, 60 byte packets
 1  centralServer (192.168.0.2)  0.049 ms  0.022 ms  0.020 ms
traceroute to 192.168.0.2 (192.168.0.2), 30 hops max, 60 byte packets
 1  centralServer (192.168.0.2)  0.048 ms  0.021 ms  0.020 ms
traceroute to 192.168.0.2 (192.168.0.2), 30 hops max, 60 byte packets
 1  centralServer (192.168.0.2)  0.049 ms  0.022 ms  0.021 ms
traceroute to 192.168.0.2 (192.168.0.2), 30 hops max, 60 byte packets
 1  centralServer (192.168.0.2)  0.046 ms  0.021 ms  0.019 ms
traceroute to 192.168.0.2 (192.168.0.2), 30 hops max, 60 byte packets
 1  centralServer (192.168.0.2)  0.043 ms  0.019 ms  0.020 ms
traceroute to 192.168.0.2 (192.168.0.2), 30 hops max, 60 byte packets
 1  centralServer (192.168.0.2)  0.041 ms  0.018 ms  0.017 ms

```

</details>

<details><summary>см. со стороны centralRouter</summary>

```text
traceroute to 192.168.0.2 (192.168.0.2), 30 hops max, 60 byte packets
 1  192.168.0.2 (192.168.0.2)  0.618 ms  0.453 ms  0.402 ms
traceroute to 192.168.0.2 (192.168.0.2), 30 hops max, 60 byte packets
 1  192.168.0.2 (192.168.0.2)  0.417 ms  0.551 ms  0.309 ms
traceroute to 192.168.0.2 (192.168.0.2), 30 hops max, 60 byte packets
 1  192.168.0.2 (192.168.0.2)  0.269 ms  0.332 ms  0.264 ms
traceroute to 192.168.0.2 (192.168.0.2), 30 hops max, 60 byte packets
 1  192.168.0.2 (192.168.0.2)  0.724 ms  25.827 ms  10.189 ms
traceroute to 192.168.0.2 (192.168.0.2), 30 hops max, 60 byte packets
 1  192.168.0.2 (192.168.0.2)  1.457 ms  1.219 ms  0.997 ms
traceroute to 192.168.0.2 (192.168.0.2), 30 hops max, 60 byte packets
 1  192.168.0.2 (192.168.0.2)  2.234 ms  3.165 ms  3.102 ms
traceroute to 192.168.0.2 (192.168.0.2), 30 hops max, 60 byte packets
 1  192.168.0.2 (192.168.0.2)  0.402 ms  0.281 ms  0.376 ms
traceroute to 192.168.0.2 (192.168.0.2), 30 hops max, 60 byte packets
 1  192.168.0.2 (192.168.0.2)  0.411 ms  0.675 ms  0.356 ms
traceroute to 192.168.0.2 (192.168.0.2), 30 hops max, 60 byte packets
 1  192.168.0.2 (192.168.0.2)  0.495 ms  0.245 ms  0.253 ms
traceroute to 192.168.0.2 (192.168.0.2), 30 hops max, 60 byte packets
 1  192.168.0.2 (192.168.0.2)  0.426 ms  0.465 ms  0.316 ms
traceroute to 192.168.0.2 (192.168.0.2), 30 hops max, 60 byte packets
 1  192.168.0.2 (192.168.0.2)  3.700 ms  3.287 ms  2.926 ms
traceroute to 192.168.0.2 (192.168.0.2), 30 hops max, 60 byte packets
 1  192.168.0.2 (192.168.0.2)  0.339 ms  0.292 ms  0.374 ms
traceroute to 192.168.0.2 (192.168.0.2), 30 hops max, 60 byte packets
 1  192.168.0.2 (192.168.0.2)  0.769 ms  0.399 ms  0.421 ms

```

</details>

<details><summary>см. со стороны inetRouter</summary>

```text
traceroute to 192.168.0.2 (192.168.0.2), 30 hops max, 60 byte packets
 1  192.168.255.2 (192.168.255.2)  0.396 ms  0.399 ms  0.425 ms
 2  192.168.0.2 (192.168.0.2)  3.763 ms  3.473 ms  3.317 ms
```

</details>

<details><summary>см. со стороны inetRouterSecond</summary>

```text
traceroute to 192.168.0.2 (192.168.0.2), 30 hops max, 60 byte packets
 1  inetRouterSecond (192.168.255.3)  3004.730 ms !H  3004.348 ms !H  3004.270 ms !H
traceroute to 192.168.0.2 (192.168.0.2), 30 hops max, 60 byte packets
 1  inetRouterSecond (192.168.255.3)  3013.013 ms !H  3012.699 ms !H  3012.593 ms !H
traceroute to 192.168.0.2 (192.168.0.2), 30 hops max, 60 byte packets
 1  inetRouterSecond (192.168.255.3)  3004.813 ms !H  3004.535 ms !H  3004.472 ms !H
traceroute to 192.168.0.2 (192.168.0.2), 30 hops max, 60 byte packets
 1  192.168.255.2 (192.168.255.2)  0.938 ms  0.302 ms  0.253 ms
 2  192.168.0.2 (192.168.0.2)  0.705 ms  0.936 ms  0.770 ms
traceroute to 192.168.0.2 (192.168.0.2), 30 hops max, 60 byte packets
 1  192.168.255.2 (192.168.255.2)  1.175 ms  0.773 ms  3.344 ms
 2  192.168.0.2 (192.168.0.2)  2.994 ms  3.237 ms  3.187 ms
traceroute to 192.168.0.2 (192.168.0.2), 30 hops max, 60 byte packets
 1  192.168.255.2 (192.168.255.2)  0.834 ms  1.154 ms  0.897 ms
 2  192.168.0.2 (192.168.0.2)  0.887 ms  1.121 ms  1.045 ms
traceroute to 192.168.0.2 (192.168.0.2), 30 hops max, 60 byte packets
 1  192.168.255.2 (192.168.255.2)  13.481 ms  12.947 ms  12.863 ms
 2  192.168.0.2 (192.168.0.2)  13.690 ms  14.122 ms  14.070 ms
traceroute to 192.168.0.2 (192.168.0.2), 30 hops max, 60 byte packets
 1  192.168.255.2 (192.168.255.2)  0.971 ms  0.340 ms  0.279 ms
 2  192.168.0.2 (192.168.0.2)  0.718 ms  0.487 ms  0.493 ms
traceroute to 192.168.0.2 (192.168.0.2), 30 hops max, 60 byte packets
 1  192.168.255.2 (192.168.255.2)  0.818 ms  0.462 ms  0.425 ms
 2  192.168.0.2 (192.168.0.2)  2.323 ms  9.538 ms  9.307 ms
traceroute to 192.168.0.2 (192.168.0.2), 30 hops max, 60 byte packets
 1  192.168.255.2 (192.168.255.2)  0.593 ms  0.426 ms  0.385 ms
 2  192.168.0.2 (192.168.0.2)  10.275 ms  9.799 ms  9.905 ms

```

</details>

* промежуточный тест доступности 192.168.255.1


<details><summary>см. со стороны centralServer</summary>

```text
traceroute to 192.168.255.1 (192.168.255.1), 30 hops max, 60 byte packets
 1  gateway (10.0.2.2)  0.248 ms  0.150 ms  0.142 ms
 2  router.asus.com (192.168.101.1)  0.929 ms  0.785 ms  0.623 ms
 3  192.168.100.1 (192.168.100.1)  2.415 ms  2.258 ms  2.549 ms
 4  mrsk-bras5.sz.ip.rostelecom.ru (212.48.195.203)  13.215 ms  13.119 ms  13.623 ms
 5  * * *
 6  * * *
 7  * * *
 8  * * *
 9  * * *
10  * * *
11  * * *
12  * * *
13  * * *
14  * * *
15  * * *
16  * * *
17  * * *
18  * * *
19  * * *
20  * * *
21  * * *
22  * * *
23  * * *
24  * * *
25  * * *
26  * * *
27  * * *
28  * * *
29  * * *
30  * * *
traceroute to 192.168.255.1 (192.168.255.1), 30 hops max, 60 byte packets
 1  gateway (192.168.0.1)  0.383 ms * *
 2  192.168.255.1 (192.168.255.1)  0.874 ms  0.663 ms  1.263 ms
traceroute to 192.168.255.1 (192.168.255.1), 30 hops max, 60 byte packets
 1  gateway (192.168.0.1)  0.402 ms  0.283 ms  0.351 ms
 2  192.168.255.1 (192.168.255.1)  0.673 ms  0.536 ms  1.259 ms
traceroute to 192.168.255.1 (192.168.255.1), 30 hops max, 60 byte packets
 1  gateway (192.168.0.1)  0.420 ms * *
 2  192.168.255.1 (192.168.255.1)  0.827 ms  0.702 ms  1.009 ms
traceroute to 192.168.255.1 (192.168.255.1), 30 hops max, 60 byte packets
 1  gateway (192.168.0.1)  0.578 ms * *
 2  192.168.255.1 (192.168.255.1)  0.941 ms  1.243 ms  0.675 ms
traceroute to 192.168.255.1 (192.168.255.1), 30 hops max, 60 byte packets
 1  gateway (192.168.0.1)  0.584 ms * *
 2  192.168.255.1 (192.168.255.1)  1.534 ms  1.316 ms  1.941 ms
traceroute to 192.168.255.1 (192.168.255.1), 30 hops max, 60 byte packets
 1  gateway (192.168.0.1)  0.505 ms  0.715 ms  0.557 ms
 2  192.168.255.1 (192.168.255.1)  1.264 ms  1.130 ms  1.936 ms
traceroute to 192.168.255.1 (192.168.255.1), 30 hops max, 60 byte packets
 1  gateway (192.168.0.1)  0.397 ms * *
 2  192.168.255.1 (192.168.255.1)  0.986 ms  0.847 ms  0.805 ms
traceroute to 192.168.255.1 (192.168.255.1), 30 hops max, 60 byte packets
 1  gateway (192.168.0.1)  0.734 ms * *
 2  192.168.255.1 (192.168.255.1)  1.185 ms  0.968 ms  1.939 ms
traceroute to 192.168.255.1 (192.168.255.1), 30 hops max, 60 byte packets
 1  * * *
 2  192.168.255.1 (192.168.255.1)  0.678 ms  0.560 ms  10.307 ms
traceroute to 192.168.255.1 (192.168.255.1), 30 hops max, 60 byte packets
 1  gateway (192.168.0.1)  0.444 ms  0.285 ms  0.249 ms
 2  192.168.255.1 (192.168.255.1)  1.225 ms  1.040 ms  1.507 ms
traceroute to 192.168.255.1 (192.168.255.1), 30 hops max, 60 byte packets
 1  gateway (192.168.0.1)  0.609 ms  0.783 ms  0.539 ms
 2  192.168.255.1 (192.168.255.1)  0.855 ms  0.649 ms  1.013 ms

```

</details>

<details><summary>см. со стороны centralRouter</summary>

```text
traceroute to 192.168.255.1 (192.168.255.1), 30 hops max, 60 byte packets
 1  gateway (192.168.255.1)  0.356 ms  0.233 ms  0.228 ms
traceroute to 192.168.255.1 (192.168.255.1), 30 hops max, 60 byte packets
 1  gateway (192.168.255.1)  1.525 ms  1.180 ms  0.990 ms
traceroute to 192.168.255.1 (192.168.255.1), 30 hops max, 60 byte packets
 1  gateway (192.168.255.1)  0.381 ms  0.349 ms  0.215 ms
traceroute to 192.168.255.1 (192.168.255.1), 30 hops max, 60 byte packets
 1  gateway (192.168.255.1)  0.448 ms  0.387 ms  0.243 ms
traceroute to 192.168.255.1 (192.168.255.1), 30 hops max, 60 byte packets
 1  gateway (192.168.255.1)  0.490 ms  0.304 ms  0.385 ms
traceroute to 192.168.255.1 (192.168.255.1), 30 hops max, 60 byte packets
 1  gateway (192.168.255.1)  0.354 ms  0.324 ms  0.330 ms
traceroute to 192.168.255.1 (192.168.255.1), 30 hops max, 60 byte packets
 1  gateway (192.168.255.1)  0.367 ms  0.252 ms  0.170 ms
traceroute to 192.168.255.1 (192.168.255.1), 30 hops max, 60 byte packets
 1  gateway (192.168.255.1)  0.372 ms  0.303 ms  0.222 ms
traceroute to 192.168.255.1 (192.168.255.1), 30 hops max, 60 byte packets
 1  gateway (192.168.255.1)  0.373 ms  0.275 ms  0.166 ms
traceroute to 192.168.255.1 (192.168.255.1), 30 hops max, 60 byte packets
 1  gateway (192.168.255.1)  0.420 ms  0.310 ms  0.243 ms
traceroute to 192.168.255.1 (192.168.255.1), 30 hops max, 60 byte packets
 1  gateway (192.168.255.1)  0.311 ms  0.260 ms  0.244 ms
traceroute to 192.168.255.1 (192.168.255.1), 30 hops max, 60 byte packets
 1  gateway (192.168.255.1)  0.455 ms  0.624 ms  0.429 ms

```

</details>

<details><summary>см. со стороны inetRouter</summary>

```text
traceroute to 192.168.255.1 (192.168.255.1), 30 hops max, 60 byte packets
 1  inetRouter (192.168.255.1)  0.072 ms  0.037 ms  0.034 ms
```

</details>

<details><summary>см. со стороны inetRouterSecond</summary>

```text
traceroute to 192.168.255.1 (192.168.255.1), 30 hops max, 60 byte packets
 1  gateway (192.168.255.1)  0.394 ms  0.244 ms  0.331 ms
traceroute to 192.168.255.1 (192.168.255.1), 30 hops max, 60 byte packets
 1  gateway (192.168.255.1)  0.668 ms  0.427 ms  0.690 ms
traceroute to 192.168.255.1 (192.168.255.1), 30 hops max, 60 byte packets
 1  gateway (192.168.255.1)  0.620 ms  0.386 ms  0.307 ms
traceroute to 192.168.255.1 (192.168.255.1), 30 hops max, 60 byte packets
 1  gateway (192.168.255.1)  0.390 ms  0.309 ms  0.190 ms
traceroute to 192.168.255.1 (192.168.255.1), 30 hops max, 60 byte packets
 1  gateway (192.168.255.1)  0.426 ms  0.179 ms  0.298 ms
traceroute to 192.168.255.1 (192.168.255.1), 30 hops max, 60 byte packets
 1  gateway (192.168.255.1)  0.427 ms  0.158 ms  0.230 ms
traceroute to 192.168.255.1 (192.168.255.1), 30 hops max, 60 byte packets
 1  gateway (192.168.255.1)  1.766 ms  1.719 ms  1.640 ms
traceroute to 192.168.255.1 (192.168.255.1), 30 hops max, 60 byte packets
 1  gateway (192.168.255.1)  0.350 ms  0.391 ms  0.233 ms
traceroute to 192.168.255.1 (192.168.255.1), 30 hops max, 60 byte packets
 1  gateway (192.168.255.1)  0.607 ms  0.394 ms  0.335 ms
traceroute to 192.168.255.1 (192.168.255.1), 30 hops max, 60 byte packets
 1  gateway (192.168.255.1)  0.314 ms  0.269 ms  0.337 ms

```

</details>

* промежуточный тест доступности 192.168.255.2


<details><summary>см. со стороны centralServer</summary>

```text
traceroute to 192.168.255.2 (192.168.255.2), 30 hops max, 60 byte packets
 1  gateway (10.0.2.2)  0.216 ms  0.134 ms  0.067 ms
 2  router.asus.com (192.168.101.1)  0.768 ms  0.656 ms  0.500 ms
 3  192.168.100.1 (192.168.100.1)  2.081 ms  2.371 ms  2.740 ms
 4  mrsk-bras5.sz.ip.rostelecom.ru (212.48.195.203)  17.823 ms  17.719 ms  17.598 ms
 5  * * *
 6  * * *
 7  * * *
 8  * * *
 9  * * *
10  * * *
11  * * *
12  * * *
13  * * *
14  * * *
15  * * *
16  * * *
17  * * *
18  * * *
19  * * *
20  * * *
21  * * *
22  * * *
23  * * *
24  * * *
25  * * *
26  * * *
27  * * *
28  * * *
29  * * *
30  * * *
traceroute to 192.168.255.2 (192.168.255.2), 30 hops max, 60 byte packets
 1  * * *
 2  * * *
 3  * * *
 4  * * *
 5  * * *
 6  * 192.168.255.2 (192.168.255.2)  0.798 ms  0.679 ms
traceroute to 192.168.255.2 (192.168.255.2), 30 hops max, 60 byte packets
 1  192.168.255.2 (192.168.255.2)  0.332 ms * *
traceroute to 192.168.255.2 (192.168.255.2), 30 hops max, 60 byte packets
 1  * * *
 2  * * *
 3  * * *
 4  * * *
 5  * * *
 6  * 192.168.255.2 (192.168.255.2)  2.325 ms  1.826 ms
traceroute to 192.168.255.2 (192.168.255.2), 30 hops max, 60 byte packets
 1  * * *
 2  * * *
 3  * * *
 4  * * *
 5  * * *
 6  * 192.168.255.2 (192.168.255.2)  1.328 ms  1.120 ms
traceroute to 192.168.255.2 (192.168.255.2), 30 hops max, 60 byte packets
 1  * * *
 2  * * *
 3  * * *
 4  * * *
 5  * * *
 6  * 192.168.255.2 (192.168.255.2)  0.866 ms  0.603 ms
traceroute to 192.168.255.2 (192.168.255.2), 30 hops max, 60 byte packets
 1  192.168.255.2 (192.168.255.2)  0.329 ms * *
traceroute to 192.168.255.2 (192.168.255.2), 30 hops max, 60 byte packets
 1  * * *
 2  * * *
 3  * * *
 4  * * *
 5  * * *
 6  * 192.168.255.2 (192.168.255.2)  0.316 ms  4.929 ms
traceroute to 192.168.255.2 (192.168.255.2), 30 hops max, 60 byte packets
 1  * * *
 2  * * *
 3  * * *
 4  * * *
 5  * * *
 6  * 192.168.255.2 (192.168.255.2)  0.675 ms  0.649 ms
traceroute to 192.168.255.2 (192.168.255.2), 30 hops max, 60 byte packets
 1  * * *
 2  * * *
 3  * * *
 4  * * *
 5  * * *
 6  * 192.168.255.2 (192.168.255.2)  0.595 ms  0.627 ms
traceroute to 192.168.255.2 (192.168.255.2), 30 hops max, 60 byte packets
 1  192.168.255.2 (192.168.255.2)  4.403 ms * *
traceroute to 192.168.255.2 (192.168.255.2), 30 hops max, 60 byte packets
 1  192.168.255.2 (192.168.255.2)  0.501 ms * *

```

</details>

<details><summary>см. со стороны centralRouter</summary>

```text
traceroute to 192.168.255.2 (192.168.255.2), 30 hops max, 60 byte packets
 1  centralRouter (192.168.255.2)  0.039 ms  0.013 ms  0.012 ms
traceroute to 192.168.255.2 (192.168.255.2), 30 hops max, 60 byte packets
 1  centralRouter (192.168.255.2)  0.037 ms  0.012 ms  0.013 ms
traceroute to 192.168.255.2 (192.168.255.2), 30 hops max, 60 byte packets
 1  centralRouter (192.168.255.2)  0.047 ms  0.021 ms  0.019 ms
traceroute to 192.168.255.2 (192.168.255.2), 30 hops max, 60 byte packets
 1  centralRouter (192.168.255.2)  0.046 ms  0.022 ms  0.023 ms
traceroute to 192.168.255.2 (192.168.255.2), 30 hops max, 60 byte packets
 1  centralRouter (192.168.255.2)  0.055 ms  0.025 ms  0.020 ms
traceroute to 192.168.255.2 (192.168.255.2), 30 hops max, 60 byte packets
 1  centralRouter (192.168.255.2)  0.041 ms  0.022 ms  0.015 ms
traceroute to 192.168.255.2 (192.168.255.2), 30 hops max, 60 byte packets
 1  centralRouter (192.168.255.2)  0.045 ms  0.020 ms  0.020 ms
traceroute to 192.168.255.2 (192.168.255.2), 30 hops max, 60 byte packets
 1  centralRouter (192.168.255.2)  0.037 ms  0.014 ms  0.012 ms
traceroute to 192.168.255.2 (192.168.255.2), 30 hops max, 60 byte packets
 1  centralRouter (192.168.255.2)  0.048 ms  0.020 ms  0.022 ms
traceroute to 192.168.255.2 (192.168.255.2), 30 hops max, 60 byte packets
 1  centralRouter (192.168.255.2)  0.049 ms  0.022 ms  0.023 ms
traceroute to 192.168.255.2 (192.168.255.2), 30 hops max, 60 byte packets
 1  centralRouter (192.168.255.2)  0.050 ms  0.023 ms  0.021 ms
traceroute to 192.168.255.2 (192.168.255.2), 30 hops max, 60 byte packets
 1  centralRouter (192.168.255.2)  0.047 ms  0.133 ms  0.035 ms

```

</details>

<details><summary>см. со стороны inetRouter</summary>

```text
traceroute to 192.168.255.2 (192.168.255.2), 30 hops max, 60 byte packets
 1  192.168.255.2 (192.168.255.2)  0.432 ms * *
```

</details>

<details><summary>см. со стороны inetRouterSecond</summary>

```text
traceroute to 192.168.255.2 (192.168.255.2), 30 hops max, 60 byte packets
 1  inetRouterSecond (192.168.255.3)  3003.623 ms !H  3003.382 ms !H  3003.322 ms !H
traceroute to 192.168.255.2 (192.168.255.2), 30 hops max, 60 byte packets
 1  inetRouterSecond (192.168.255.3)  3004.007 ms !H  3003.707 ms !H  3003.649 ms !H
traceroute to 192.168.255.2 (192.168.255.2), 30 hops max, 60 byte packets
 1  inetRouterSecond (192.168.255.3)  3010.892 ms !H  3008.804 ms !H  3008.687 ms !H
traceroute to 192.168.255.2 (192.168.255.2), 30 hops max, 60 byte packets
 1  192.168.255.2 (192.168.255.2)  0.471 ms * *
traceroute to 192.168.255.2 (192.168.255.2), 30 hops max, 60 byte packets
 1  192.168.255.2 (192.168.255.2)  0.528 ms * *
traceroute to 192.168.255.2 (192.168.255.2), 30 hops max, 60 byte packets
 1  192.168.255.2 (192.168.255.2)  0.428 ms * *
traceroute to 192.168.255.2 (192.168.255.2), 30 hops max, 60 byte packets
 1  192.168.255.2 (192.168.255.2)  0.347 ms * *
traceroute to 192.168.255.2 (192.168.255.2), 30 hops max, 60 byte packets
 1  192.168.255.2 (192.168.255.2)  0.338 ms * *
traceroute to 192.168.255.2 (192.168.255.2), 30 hops max, 60 byte packets
 1  192.168.255.2 (192.168.255.2)  0.490 ms * *
traceroute to 192.168.255.2 (192.168.255.2), 30 hops max, 60 byte packets
 1  192.168.255.2 (192.168.255.2)  0.427 ms * *

```

</details>

* промежуточный тест доступности 8.8.8.8 (это выход во вне)


<details><summary>см. со стороны centralServer</summary>

```text
traceroute to 8.8.8.8 (8.8.8.8), 30 hops max, 60 byte packets
 1  gateway (10.0.2.2)  0.353 ms  0.307 ms  0.244 ms
 2  router.asus.com (192.168.101.1)  0.742 ms  0.605 ms  0.611 ms
 3  192.168.100.1 (192.168.100.1)  1.456 ms  2.099 ms  3.526 ms
 4  mrsk-bras5.sz.ip.rostelecom.ru (212.48.195.203)  44.600 ms  45.521 ms  45.426 ms
 5  212.48.194.212 (212.48.194.212)  13.456 ms pos14-0-0-s16.E320-1-VLGD.nwtelecom.ru (212.48.194.218)  35.839 ms  13.246 ms
 6  188.254.2.4 (188.254.2.4)  30.638 ms 188.254.2.6 (188.254.2.6)  24.399 ms 188.254.2.4 (188.254.2.4)  23.143 ms
 7  87.226.194.47 (87.226.194.47)  71.037 ms  26.845 ms  26.555 ms
 8  74.125.244.180 (74.125.244.180)  29.833 ms  24.712 ms  25.443 ms
 9  216.239.48.163 (216.239.48.163)  28.699 ms  31.349 ms 72.14.232.85 (72.14.232.85)  28.858 ms
10  172.253.51.241 (172.253.51.241)  33.467 ms 216.239.57.229 (216.239.57.229)  41.314 ms 142.251.61.221 (142.251.61.221)  40.251 ms
11  * * *
12  * * *
13  * * *
14  * * *
15  * * *
16  * * *
17  * * *
18  * * *
19  * * *
20  * * dns.google (8.8.8.8)  51.370 ms
traceroute to 8.8.8.8 (8.8.8.8), 30 hops max, 60 byte packets
 1  gateway (192.168.0.1)  0.305 ms  0.230 ms  0.365 ms
 2  192.168.255.1 (192.168.255.1)  1.395 ms  1.270 ms  1.082 ms
 3  * * *
 4  * * *
 5  * * *
 6  mrsk-bras5.sz.ip.rostelecom.ru (212.48.195.203)  9.284 ms  13.483 ms  14.100 ms
 7  pos14-0-0-s16.E320-1-VLGD.nwtelecom.ru (212.48.194.218)  13.870 ms 212.48.194.212 (212.48.194.212)  14.254 ms pos14-0-0-s16.E320-1-VLGD.nwtelecom.ru (212.48.194.218)  13.299 ms
 8  188.254.2.6 (188.254.2.6)  41.099 ms  33.552 ms  27.331 ms
 9  87.226.194.47 (87.226.194.47)  26.256 ms  27.366 ms  27.115 ms
10  74.125.244.180 (74.125.244.180)  31.840 ms  25.388 ms 74.125.244.132 (74.125.244.132)  39.991 ms
11  216.239.48.163 (216.239.48.163)  32.057 ms  32.995 ms 72.14.232.85 (72.14.232.85)  28.987 ms
12  142.251.61.221 (142.251.61.221)  32.526 ms  42.580 ms  28.954 ms
13  172.253.79.237 (172.253.79.237)  32.475 ms 172.253.51.237 (172.253.51.237)  44.147 ms 216.239.57.5 (216.239.57.5)  35.122 ms
14  * * *
15  * * *
16  * * *
17  * * *
18  * * *
19  * * *
20  * * *
21  * * *
22  * * dns.google (8.8.8.8)  42.240 ms
traceroute to 8.8.8.8 (8.8.8.8), 30 hops max, 60 byte packets
 1  gateway (192.168.0.1)  0.354 ms  0.118 ms  0.183 ms
 2  * * *
 3  * * *
 4  * * *
 5  * * *
 6  mrsk-bras5.sz.ip.rostelecom.ru (212.48.195.203)  7.947 ms  7.709 ms  7.662 ms
 7  pos14-0-0-s16.E320-1-VLGD.nwtelecom.ru (212.48.194.218)  8.590 ms  8.622 ms 212.48.194.212 (212.48.194.212)  7.291 ms
 8  188.254.2.6 (188.254.2.6)  25.929 ms  26.184 ms  35.482 ms
 9  87.226.194.47 (87.226.194.47)  23.392 ms  23.775 ms  22.947 ms
10  74.125.244.132 (74.125.244.132)  24.516 ms  36.716 ms 74.125.244.180 (74.125.244.180)  24.999 ms
11  72.14.232.85 (72.14.232.85)  23.890 ms  25.329 ms 142.251.61.219 (142.251.61.219)  27.552 ms
12  142.251.51.187 (142.251.51.187)  26.659 ms 172.253.51.221 (172.253.51.221)  27.883 ms 72.14.237.199 (72.14.237.199)  27.632 ms
13  * * 172.253.64.55 (172.253.64.55)  29.942 ms
14  * * *
15  * * *
16  * * *
17  * * *
18  * * *
19  * * *
20  * * *
21  * dns.google (8.8.8.8)  34.534 ms *
traceroute to 8.8.8.8 (8.8.8.8), 30 hops max, 60 byte packets
 1  gateway (192.168.0.1)  0.356 ms  0.155 ms  0.229 ms
 2  192.168.255.1 (192.168.255.1)  0.664 ms  0.735 ms  1.262 ms
 3  * * *
 4  * * *
 5  * * *
 6  mrsk-bras5.sz.ip.rostelecom.ru (212.48.195.203)  8.617 ms  15.843 ms  15.235 ms
 7  pos14-0-0-s16.E320-1-VLGD.nwtelecom.ru (212.48.194.218)  14.843 ms  14.925 ms 212.48.194.212 (212.48.194.212)  14.544 ms
 8  188.254.2.6 (188.254.2.6)  41.450 ms  34.746 ms  27.176 ms
 9  87.226.194.47 (87.226.194.47)  26.809 ms  36.582 ms  26.947 ms
10  74.125.244.132 (74.125.244.132)  35.495 ms  23.751 ms  27.621 ms
11  142.251.61.219 (142.251.61.219)  29.711 ms 216.239.48.163 (216.239.48.163)  31.838 ms 142.251.61.219 (142.251.61.219)  33.678 ms
12  142.251.51.187 (142.251.51.187)  37.762 ms 216.239.62.9 (216.239.62.9)  30.257 ms 142.251.51.187 (142.251.51.187)  26.120 ms
13  142.250.56.13 (142.250.56.13)  26.052 ms * *
14  * * *
15  * * *
16  * * *
17  * * *
18  * * *
19  * * *
20  * * *
21  * * *
22  dns.google (8.8.8.8)  31.587 ms * *
traceroute to 8.8.8.8 (8.8.8.8), 30 hops max, 60 byte packets
 1  gateway (192.168.0.1)  0.344 ms  0.246 ms  0.248 ms
 2  192.168.255.1 (192.168.255.1)  2.239 ms  2.047 ms  1.898 ms
 3  * * *
 4  * * *
 5  * * *
 6  mrsk-bras5.sz.ip.rostelecom.ru (212.48.195.203)  8.911 ms  13.631 ms  13.949 ms
 7  pos14-0-0-s16.E320-1-VLGD.nwtelecom.ru (212.48.194.218)  13.827 ms 212.48.194.212 (212.48.194.212)  13.696 ms pos14-0-0-s16.E320-1-VLGD.nwtelecom.ru (212.48.194.218)  14.131 ms
 8  188.254.2.4 (188.254.2.4)  29.346 ms  30.847 ms  24.084 ms
 9  87.226.194.47 (87.226.194.47)  34.351 ms  33.941 ms  35.154 ms
10  74.125.244.180 (74.125.244.180)  33.420 ms 74.125.244.132 (74.125.244.132)  26.443 ms 74.125.244.180 (74.125.244.180)  24.788 ms
11  72.14.232.85 (72.14.232.85)  25.650 ms  23.647 ms 142.251.61.219 (142.251.61.219)  46.890 ms
12  142.250.57.5 (142.250.57.5)  32.241 ms 216.239.63.27 (216.239.63.27)  41.424 ms 216.239.62.15 (216.239.62.15)  26.104 ms
13  172.253.51.243 (172.253.51.243)  38.810 ms * 172.253.51.245 (172.253.51.245)  28.671 ms
14  * * *
15  * * *
16  * * *
17  * * *
18  * * *
19  * * *
20  * * *
21  * * *
22  * * dns.google (8.8.8.8)  35.253 ms
traceroute to 8.8.8.8 (8.8.8.8), 30 hops max, 60 byte packets
 1  gateway (192.168.0.1)  0.386 ms  0.204 ms  0.242 ms
 2  192.168.255.1 (192.168.255.1)  0.760 ms  0.645 ms  0.617 ms
 3  * * *
 4  * * *
 5  * * *
 6  mrsk-bras5.sz.ip.rostelecom.ru (212.48.195.203)  8.880 ms  14.546 ms  14.075 ms
 7  212.48.194.212 (212.48.194.212)  13.868 ms pos14-0-0-s16.E320-1-VLGD.nwtelecom.ru (212.48.194.218)  13.598 ms 212.48.194.212 (212.48.194.212)  13.326 ms
 8  188.254.2.6 (188.254.2.6)  32.345 ms  42.090 ms  33.892 ms
 9  87.226.194.47 (87.226.194.47)  24.308 ms  35.710 ms  26.787 ms
10  74.125.244.132 (74.125.244.132)  30.970 ms  28.795 ms  32.975 ms
11  216.239.48.163 (216.239.48.163)  26.635 ms  26.275 ms 142.251.61.219 (142.251.61.219)  36.290 ms
12  142.251.51.187 (142.251.51.187)  59.972 ms 142.250.56.219 (142.250.56.219)  37.587 ms 142.251.61.221 (142.251.61.221)  28.036 ms
13  172.253.79.115 (172.253.79.115)  27.949 ms * *
14  * * *
15  * * *
16  * * *
17  * * *
18  * * *
19  * * *
20  * * *
21  * * *
22  * dns.google (8.8.8.8)  34.726 ms  45.443 ms
traceroute to 8.8.8.8 (8.8.8.8), 30 hops max, 60 byte packets
 1  gateway (192.168.0.1)  0.350 ms  0.212 ms  0.201 ms
 2  * * *
 3  * * *
 4  * * *
 5  * * *
 6  mrsk-bras5.sz.ip.rostelecom.ru (212.48.195.203)  6.995 ms  8.071 ms  7.743 ms
 7  pos14-0-0-s16.E320-1-VLGD.nwtelecom.ru (212.48.194.218)  7.400 ms  14.651 ms  11.947 ms
 8  188.254.2.4 (188.254.2.4)  32.318 ms 188.254.2.6 (188.254.2.6)  32.664 ms 188.254.2.4 (188.254.2.4)  25.986 ms
 9  87.226.194.47 (87.226.194.47)  24.469 ms  27.444 ms  26.602 ms
10  74.125.244.132 (74.125.244.132)  28.387 ms  25.656 ms  24.048 ms
11  72.14.232.85 (72.14.232.85)  26.473 ms  24.718 ms  28.369 ms
12  172.253.51.223 (172.253.51.223)  31.448 ms 142.250.56.219 (142.250.56.219)  40.553 ms 142.251.51.187 (142.251.51.187)  28.698 ms
13  * 216.239.47.165 (216.239.47.165)  28.172 ms 216.239.47.173 (216.239.47.173)  38.387 ms
14  * * *
15  * * *
16  * * *
17  * * *
18  * * *
19  dns.google (8.8.8.8)  42.388 ms * *
traceroute to 8.8.8.8 (8.8.8.8), 30 hops max, 60 byte packets
 1  gateway (192.168.0.1)  0.723 ms  0.378 ms  0.412 ms
 2  192.168.255.1 (192.168.255.1)  1.317 ms  1.060 ms  1.899 ms
 3  * * *
 4  * * *
 5  * * *
 6  mrsk-bras5.sz.ip.rostelecom.ru (212.48.195.203)  8.536 ms  12.515 ms  12.381 ms
 7  212.48.194.212 (212.48.194.212)  14.406 ms pos14-0-0-s16.E320-1-VLGD.nwtelecom.ru (212.48.194.218)  14.236 ms  14.108 ms
 8  188.254.2.6 (188.254.2.6)  53.261 ms 188.254.2.4 (188.254.2.4)  32.803 ms 188.254.2.6 (188.254.2.6)  41.245 ms
 9  87.226.194.47 (87.226.194.47)  39.130 ms  37.611 ms  35.518 ms
10  74.125.244.132 (74.125.244.132)  34.072 ms 74.125.244.180 (74.125.244.180)  24.658 ms  38.058 ms
11  72.14.232.85 (72.14.232.85)  28.069 ms 216.239.48.163 (216.239.48.163)  32.879 ms 142.251.61.219 (142.251.61.219)  35.918 ms
12  216.239.46.139 (216.239.46.139)  35.393 ms 72.14.237.199 (72.14.237.199)  34.757 ms 142.251.61.221 (142.251.61.221)  32.064 ms
13  142.250.56.131 (142.250.56.131)  29.394 ms * *
14  * * *
15  * * *
16  * * *
17  * * *
18  * * *
19  * * *
20  * * *
21  * * dns.google (8.8.8.8)  32.471 ms
traceroute to 8.8.8.8 (8.8.8.8), 30 hops max, 60 byte packets
 1  gateway (192.168.0.1)  0.371 ms  0.288 ms  0.168 ms
 2  192.168.255.1 (192.168.255.1)  0.623 ms  3.686 ms  3.570 ms
 3  * * *
 4  * * *
 5  * * *
 6  mrsk-bras5.sz.ip.rostelecom.ru (212.48.195.203)  12.559 ms  14.157 ms  14.136 ms
 7  pos14-0-0-s16.E320-1-VLGD.nwtelecom.ru (212.48.194.218)  21.534 ms  21.370 ms  12.025 ms
 8  188.254.2.4 (188.254.2.4)  32.592 ms 188.254.2.6 (188.254.2.6)  39.107 ms 188.254.2.4 (188.254.2.4)  22.539 ms
 9  87.226.194.47 (87.226.194.47)  26.858 ms  26.195 ms  25.748 ms
10  74.125.244.132 (74.125.244.132)  26.640 ms 74.125.244.180 (74.125.244.180)  25.061 ms  23.967 ms
11  216.239.48.163 (216.239.48.163)  32.507 ms 142.251.61.219 (142.251.61.219)  32.316 ms 72.14.232.85 (72.14.232.85)  31.991 ms
12  142.251.61.221 (142.251.61.221)  32.198 ms 216.239.42.21 (216.239.42.21)  31.343 ms 142.251.61.221 (142.251.61.221)  28.257 ms
13  * * *
14  * * *
15  * * *
16  * * *
17  * * *
18  * * *
19  * * *
20  * * *
21  * * *
22  * dns.google (8.8.8.8)  44.840 ms  44.735 ms
traceroute to 8.8.8.8 (8.8.8.8), 30 hops max, 60 byte packets
 1  gateway (192.168.0.1)  0.307 ms  0.244 ms  0.164 ms
 2  192.168.255.1 (192.168.255.1)  0.601 ms  0.457 ms  0.488 ms
 3  * * *
 4  * * *
 5  * * *
 6  mrsk-bras5.sz.ip.rostelecom.ru (212.48.195.203)  7.485 ms  13.185 ms  13.640 ms
 7  212.48.194.212 (212.48.194.212)  13.405 ms  13.059 ms pos14-0-0-s16.E320-1-VLGD.nwtelecom.ru (212.48.194.218)  13.546 ms
 8  188.254.2.6 (188.254.2.6)  31.941 ms  32.844 ms  26.638 ms
 9  87.226.194.47 (87.226.194.47)  25.778 ms  25.467 ms  26.686 ms
10  74.125.244.180 (74.125.244.180)  27.435 ms  22.248 ms  22.189 ms
11  142.251.61.219 (142.251.61.219)  26.946 ms 72.14.232.85 (72.14.232.85)  28.045 ms 216.239.48.163 (216.239.48.163)  39.438 ms
12  142.250.56.15 (142.250.56.15)  32.480 ms 142.251.51.187 (142.251.51.187)  31.885 ms 142.251.61.221 (142.251.61.221)  29.383 ms
13  * 142.250.56.221 (142.250.56.221)  29.680 ms 142.250.209.35 (142.250.209.35)  28.547 ms
14  * * *
15  * * *
16  * * *
17  * * *
18  * * *
19  * * *
20  * * *
21  * * *
22  dns.google (8.8.8.8)  31.629 ms  40.829 ms *
traceroute to 8.8.8.8 (8.8.8.8), 30 hops max, 60 byte packets
 1  gateway (192.168.0.1)  1.059 ms  0.918 ms  0.658 ms
 2  * * *
 3  * * *
 4  * * *
 5  * * *
 6  mrsk-bras5.sz.ip.rostelecom.ru (212.48.195.203)  33.032 ms  13.742 ms  14.361 ms
 7  212.48.194.212 (212.48.194.212)  25.582 ms  25.406 ms pos14-0-0-s16.E320-1-VLGD.nwtelecom.ru (212.48.194.218)  11.150 ms
 8  188.254.2.6 (188.254.2.6)  26.404 ms 188.254.2.4 (188.254.2.4)  23.159 ms  24.426 ms
 9  87.226.194.47 (87.226.194.47)  39.169 ms  38.680 ms  31.358 ms
10  74.125.244.132 (74.125.244.132)  28.903 ms 74.125.244.180 (74.125.244.180)  66.584 ms 74.125.244.132 (74.125.244.132)  52.970 ms
11  72.14.232.85 (72.14.232.85)  52.106 ms 142.251.61.219 (142.251.61.219)  52.248 ms 72.14.232.85 (72.14.232.85)  44.279 ms
12  142.251.51.187 (142.251.51.187)  51.217 ms 172.253.64.53 (172.253.64.53)  56.189 ms 142.250.210.47 (142.250.210.47)  58.053 ms
13  142.250.56.13 (142.250.56.13)  26.832 ms *  32.994 ms
14  * * *
15  * * *
16  * * *
17  * * *
18  * * *
19  * * *
20  * * *
21  * * *
22  * * *
23  dns.google (8.8.8.8)  45.015 ms  44.918 ms *
traceroute to 8.8.8.8 (8.8.8.8), 30 hops max, 60 byte packets
 1  gateway (192.168.0.1)  0.350 ms  1.223 ms  0.938 ms
 2  192.168.255.1 (192.168.255.1)  8.418 ms * *
 3  * * *
 4  * * *
 5  * * *
 6  mrsk-bras5.sz.ip.rostelecom.ru (212.48.195.203)  9.085 ms  20.368 ms  17.370 ms
 7  pos14-0-0-s16.E320-1-VLGD.nwtelecom.ru (212.48.194.218)  17.356 ms 212.48.194.212 (212.48.194.212)  16.943 ms pos14-0-0-s16.E320-1-VLGD.nwtelecom.ru (212.48.194.218)  17.371 ms
 8  188.254.2.4 (188.254.2.4)  24.642 ms  31.684 ms  31.340 ms
 9  87.226.194.47 (87.226.194.47)  31.117 ms  31.286 ms  29.351 ms
10  74.125.244.180 (74.125.244.180)  34.241 ms  34.111 ms  37.287 ms
11  142.251.61.219 (142.251.61.219)  35.266 ms 72.14.232.85 (72.14.232.85)  32.238 ms  28.438 ms
12  142.251.51.187 (142.251.51.187)  47.900 ms 142.251.61.221 (142.251.61.221)  46.466 ms 142.250.208.23 (142.250.208.23)  44.436 ms
13  * * *
14  * * *
15  * * *
16  * * *
17  * * *
18  * * *
19  * * *
20  * * *
21  * * *
22  dns.google (8.8.8.8)  37.074 ms  38.553 ms *

```

</details>

<details><summary>см. со стороны centralRouter</summary>

```text
traceroute to 8.8.8.8 (8.8.8.8), 30 hops max, 60 byte packets
 1  * * *
 2  * * *
 3  * * *
 4  * * *
 5  * * *
 6  * * *
 7  * * *
 8  * * *
 9  * * *
10  * * *
11  * * *
12  * * *
13  * * *
14  * * *
15  * * *
16  * * *
17  * * *
18  * * *
19  * * *
20  * * *
21  * * *
22  * * *
23  * * *
24  * * *
25  * * *
26  * * *
27  * * *
28  * * *
29  * * *
30  * * *
traceroute to 8.8.8.8 (8.8.8.8), 30 hops max, 60 byte packets
 1  * * *
 2  * * *
 3  * * *
 4  192.168.100.1 (192.168.100.1)  3.812 ms  3.644 ms  4.026 ms
 5  mrsk-bras5.sz.ip.rostelecom.ru (212.48.195.203)  19.492 ms  19.405 ms  19.302 ms
 6  212.48.194.212 (212.48.194.212)  18.034 ms  15.754 ms pos14-0-0-s16.E320-1-VLGD.nwtelecom.ru (212.48.194.218)  15.509 ms
 7  188.254.2.6 (188.254.2.6)  38.470 ms  27.492 ms 188.254.2.4 (188.254.2.4)  23.053 ms
 8  87.226.194.47 (87.226.194.47)  33.229 ms  33.066 ms  26.993 ms
 9  74.125.244.132 (74.125.244.132)  31.584 ms  24.005 ms  23.670 ms
10  72.14.232.85 (72.14.232.85)  26.559 ms 216.239.48.163 (216.239.48.163)  38.756 ms 142.251.61.219 (142.251.61.219)  26.792 ms
11  142.250.208.23 (142.250.208.23)  36.769 ms 142.251.61.221 (142.251.61.221)  29.181 ms 172.253.64.113 (172.253.64.113)  26.702 ms
12  * 172.253.51.247 (172.253.51.247)  26.939 ms 142.250.209.35 (142.250.209.35)  25.929 ms
13  * * *
14  * * *
15  * * *
16  * * *
17  * * *
18  * * *
19  * * *
20  * * *
21  * * *
22  dns.google (8.8.8.8)  37.425 ms  37.229 ms  37.101 ms
traceroute to 8.8.8.8 (8.8.8.8), 30 hops max, 60 byte packets
 1  * * *
 2  * * *
 3  * * *
 4  192.168.100.1 (192.168.100.1)  3.039 ms  3.900 ms  4.246 ms
 5  mrsk-bras5.sz.ip.rostelecom.ru (212.48.195.203)  14.173 ms  14.085 ms  13.982 ms
 6  212.48.194.212 (212.48.194.212)  13.875 ms pos14-0-0-s16.E320-1-VLGD.nwtelecom.ru (212.48.194.218)  11.291 ms 212.48.194.212 (212.48.194.212)  9.933 ms
 7  188.254.2.4 (188.254.2.4)  28.131 ms 188.254.2.6 (188.254.2.6)  31.947 ms 188.254.2.4 (188.254.2.4)  22.620 ms
 8  87.226.194.47 (87.226.194.47)  48.504 ms  26.683 ms  26.541 ms
 9  74.125.244.132 (74.125.244.132)  31.442 ms  22.496 ms 74.125.244.180 (74.125.244.180)  22.420 ms
10  142.251.61.219 (142.251.61.219)  25.798 ms  26.213 ms  26.797 ms
11  172.253.70.49 (172.253.70.49)  36.920 ms 216.239.49.113 (216.239.49.113)  28.077 ms 216.239.47.203 (216.239.47.203)  28.595 ms
12  * * *
13  * * *
14  * * *
15  * * *
16  * * *
17  * * *
18  * * *
19  * * dns.google (8.8.8.8)  36.139 ms
traceroute to 8.8.8.8 (8.8.8.8), 30 hops max, 60 byte packets
 1  * * *
 2  * * *
 3  * * *
 4  192.168.100.1 (192.168.100.1)  2.014 ms  2.154 ms  3.119 ms
 5  mrsk-bras5.sz.ip.rostelecom.ru (212.48.195.203)  11.457 ms  11.342 ms  11.585 ms
 6  212.48.194.212 (212.48.194.212)  12.196 ms  10.802 ms pos14-0-0-s16.E320-1-VLGD.nwtelecom.ru (212.48.194.218)  10.675 ms
 7  188.254.2.6 (188.254.2.6)  30.431 ms  25.788 ms 188.254.2.4 (188.254.2.4)  32.441 ms
 8  87.226.194.47 (87.226.194.47)  23.561 ms  24.896 ms  26.676 ms
 9  74.125.244.180 (74.125.244.180)  29.669 ms 74.125.244.132 (74.125.244.132)  24.572 ms  127.248 ms
10  216.239.48.163 (216.239.48.163)  28.848 ms 72.14.232.85 (72.14.232.85)  36.855 ms 216.239.48.163 (216.239.48.163)  38.044 ms
11  142.250.56.15 (142.250.56.15)  26.349 ms 142.251.51.187 (142.251.51.187)  24.619 ms 216.239.57.229 (216.239.57.229)  27.887 ms
12  * * *
13  * * *
14  * * *
15  * * *
16  * * *
17  * * *
18  * * dns.google (8.8.8.8)  42.821 ms
traceroute to 8.8.8.8 (8.8.8.8), 30 hops max, 60 byte packets
 1  * * *
 2  * * *
 3  * * *
 4  192.168.100.1 (192.168.100.1)  10.341 ms  10.173 ms  9.999 ms
 5  mrsk-bras5.sz.ip.rostelecom.ru (212.48.195.203)  9.811 ms  8.311 ms  8.024 ms
 6  212.48.194.212 (212.48.194.212)  7.838 ms pos14-0-0-s16.E320-1-VLGD.nwtelecom.ru (212.48.194.218)  10.620 ms  10.413 ms
 7  188.254.2.4 (188.254.2.4)  26.336 ms  26.151 ms  25.958 ms
 8  87.226.194.47 (87.226.194.47)  27.329 ms  43.524 ms  33.745 ms
 9  74.125.244.132 (74.125.244.132)  33.429 ms 74.125.244.180 (74.125.244.180)  25.191 ms  25.012 ms
10  216.239.48.163 (216.239.48.163)  35.351 ms 142.251.61.219 (142.251.61.219)  37.497 ms 72.14.232.85 (72.14.232.85)  42.846 ms
11  72.14.235.193 (72.14.235.193)  36.156 ms 142.251.61.221 (142.251.61.221)  40.883 ms 172.253.51.241 (172.253.51.241)  30.135 ms
12  216.239.47.173 (216.239.47.173)  36.535 ms 172.253.79.237 (172.253.79.237)  33.258 ms 172.253.70.51 (172.253.70.51)  28.858 ms
13  * * *
14  * * *
15  * * *
16  * * *
17  * * *
18  * * *
19  * * *
20  * * *
21  * * *
22  dns.google (8.8.8.8)  40.850 ms  40.574 ms  48.176 ms
traceroute to 8.8.8.8 (8.8.8.8), 30 hops max, 60 byte packets
 1  * * *
 2  * * *
 3  * * *
 4  192.168.100.1 (192.168.100.1)  1.709 ms  2.277 ms  2.851 ms
 5  mrsk-bras5.sz.ip.rostelecom.ru (212.48.195.203)  11.883 ms  12.305 ms  12.179 ms
 6  pos14-0-0-s16.E320-1-VLGD.nwtelecom.ru (212.48.194.218)  12.360 ms 212.48.194.212 (212.48.194.212)  11.081 ms pos14-0-0-s16.E320-1-VLGD.nwtelecom.ru (212.48.194.218)  18.393 ms
 7  188.254.2.6 (188.254.2.6)  30.495 ms  25.590 ms 188.254.2.4 (188.254.2.4)  24.139 ms
 8  87.226.194.47 (87.226.194.47)  33.643 ms  24.149 ms  24.821 ms
 9  74.125.244.180 (74.125.244.180)  25.267 ms  21.367 ms 74.125.244.132 (74.125.244.132)  23.443 ms
10  142.251.61.219 (142.251.61.219)  35.537 ms  30.507 ms 72.14.232.85 (72.14.232.85)  26.298 ms
11  209.85.251.63 (209.85.251.63)  27.170 ms 216.239.42.21 (216.239.42.21)  30.580 ms 142.251.61.221 (142.251.61.221)  28.367 ms
12  216.239.47.165 (216.239.47.165)  26.054 ms 216.239.47.201 (216.239.47.201)  26.377 ms 216.239.62.13 (216.239.62.13)  27.086 ms
13  * * *
14  * * *
15  * * *
16  * * *
17  * * *
18  * * *
19  * * *
20  * * *
21  * * *
22  * dns.google (8.8.8.8)  51.802 ms *
traceroute to 8.8.8.8 (8.8.8.8), 30 hops max, 60 byte packets
 1  * * *
 2  * * *
 3  * * *
 4  192.168.100.1 (192.168.100.1)  1.949 ms  2.583 ms  3.444 ms
 5  mrsk-bras5.sz.ip.rostelecom.ru (212.48.195.203)  10.984 ms  10.862 ms  11.573 ms
 6  pos14-0-0-s16.E320-1-VLGD.nwtelecom.ru (212.48.194.218)  11.710 ms  10.541 ms 212.48.194.212 (212.48.194.212)  17.066 ms
 7  188.254.2.4 (188.254.2.4)  25.910 ms  21.923 ms  21.938 ms
 8  87.226.194.47 (87.226.194.47)  23.290 ms  32.914 ms  26.186 ms
 9  74.125.244.180 (74.125.244.180)  32.319 ms 74.125.244.132 (74.125.244.132)  25.125 ms  24.289 ms
10  216.239.48.163 (216.239.48.163)  25.424 ms  26.035 ms  26.127 ms
11  142.251.51.187 (142.251.51.187)  24.728 ms  25.616 ms 216.239.56.101 (216.239.56.101)  26.522 ms
12  172.253.79.115 (172.253.79.115)  27.798 ms 172.253.51.247 (172.253.51.247)  30.755 ms *
13  * * *
14  * * *
15  * * *
16  * * *
17  * * *
18  * * *
19  * * *
20  * * *
21  * * *
22  * dns.google (8.8.8.8)  37.942 ms  48.950 ms
traceroute to 8.8.8.8 (8.8.8.8), 30 hops max, 60 byte packets
 1  * * *
 2  * * *
 3  * * *
 4  192.168.100.1 (192.168.100.1)  2.305 ms  3.107 ms  3.118 ms
 5  mrsk-bras5.sz.ip.rostelecom.ru (212.48.195.203)  11.064 ms  10.926 ms  10.778 ms
 6  212.48.194.212 (212.48.194.212)  11.260 ms pos14-0-0-s16.E320-1-VLGD.nwtelecom.ru (212.48.194.218)  16.807 ms  14.781 ms
 7  188.254.2.6 (188.254.2.6)  29.716 ms  26.150 ms  38.137 ms
 8  87.226.194.47 (87.226.194.47)  22.712 ms  33.083 ms  23.747 ms
 9  74.125.244.132 (74.125.244.132)  26.818 ms  22.958 ms 74.125.244.180 (74.125.244.180)  22.382 ms
10  216.239.48.163 (216.239.48.163)  25.040 ms  24.868 ms  25.905 ms
11  142.251.51.187 (142.251.51.187)  25.615 ms  34.589 ms 142.250.208.23 (142.250.208.23)  36.159 ms
12  * * 172.253.51.189 (172.253.51.189)  25.630 ms
13  * * *
14  * * *
15  * * *
16  * * *
17  * * *
18  * * *
19  * * *
20  * * *
21  * * dns.google (8.8.8.8)  33.868 ms
traceroute to 8.8.8.8 (8.8.8.8), 30 hops max, 60 byte packets
 1  * * *
 2  * * *
 3  * * *
 4  192.168.100.1 (192.168.100.1)  1.763 ms  2.806 ms  2.926 ms
 5  mrsk-bras5.sz.ip.rostelecom.ru (212.48.195.203)  11.185 ms  11.033 ms  10.892 ms
 6  pos14-0-0-s16.E320-1-VLGD.nwtelecom.ru (212.48.194.218)  11.832 ms 212.48.194.212 (212.48.194.212)  10.467 ms pos14-0-0-s16.E320-1-VLGD.nwtelecom.ru (212.48.194.218)  9.897 ms
 7  188.254.2.4 (188.254.2.4)  26.822 ms  21.826 ms 188.254.2.6 (188.254.2.6)  34.763 ms
 8  87.226.194.47 (87.226.194.47)  22.679 ms  25.620 ms  25.113 ms
 9  74.125.244.132 (74.125.244.132)  29.802 ms 74.125.244.180 (74.125.244.180)  22.512 ms 74.125.244.132 (74.125.244.132)  22.640 ms
10  72.14.232.85 (72.14.232.85)  25.026 ms 216.239.48.163 (216.239.48.163)  26.512 ms 72.14.232.85 (72.14.232.85)  33.883 ms
11  142.251.61.221 (142.251.61.221)  35.872 ms 72.14.235.193 (72.14.235.193)  26.099 ms 216.239.58.65 (216.239.58.65)  29.954 ms
12  * 142.250.56.127 (142.250.56.127)  28.684 ms 142.250.56.13 (142.250.56.13)  27.019 ms
13  * * *
14  * * *
15  * * *
16  * * *
17  * * *
18  * * *
19  * * *
20  * * *
21  dns.google (8.8.8.8)  31.793 ms  32.432 ms  32.195 ms
traceroute to 8.8.8.8 (8.8.8.8), 30 hops max, 60 byte packets
 1  * * *
 2  * * *
 3  * * *
 4  192.168.100.1 (192.168.100.1)  1.827 ms  2.855 ms  3.470 ms
 5  mrsk-bras5.sz.ip.rostelecom.ru (212.48.195.203)  12.166 ms  12.060 ms  11.925 ms
 6  pos14-0-0-s16.E320-1-VLGD.nwtelecom.ru (212.48.194.218)  11.805 ms  10.435 ms 212.48.194.212 (212.48.194.212)  9.526 ms
 7  188.254.2.4 (188.254.2.4)  26.461 ms  24.853 ms 188.254.2.6 (188.254.2.6)  33.749 ms
 8  87.226.194.47 (87.226.194.47)  25.430 ms  26.910 ms  26.622 ms
 9  74.125.244.180 (74.125.244.180)  31.653 ms  31.014 ms 74.125.244.132 (74.125.244.132)  23.287 ms
10  142.251.61.219 (142.251.61.219)  28.072 ms 216.239.48.163 (216.239.48.163)  28.122 ms 142.251.61.219 (142.251.61.219)  27.136 ms
11  142.251.61.221 (142.251.61.221)  27.652 ms 142.251.51.187 (142.251.51.187)  63.076 ms  49.176 ms
12  172.253.70.51 (172.253.70.51)  30.278 ms * *
13  * * *
14  * * *
15  * * *
16  * * *
17  * * *
18  * * *
19  * * *
20  * * *
21  * * dns.google (8.8.8.8)  48.922 ms
traceroute to 8.8.8.8 (8.8.8.8), 30 hops max, 60 byte packets
 1  * * *
 2  * * *
 3  * * *
 4  192.168.100.1 (192.168.100.1)  3.671 ms  4.075 ms  4.756 ms
 5  mrsk-bras5.sz.ip.rostelecom.ru (212.48.195.203)  17.359 ms  17.513 ms  17.363 ms
 6  212.48.194.212 (212.48.194.212)  15.366 ms  13.762 ms  13.557 ms
 7  188.254.2.6 (188.254.2.6)  29.795 ms  24.148 ms 188.254.2.4 (188.254.2.4)  23.950 ms
 8  87.226.194.47 (87.226.194.47)  26.751 ms  28.755 ms  31.811 ms
 9  74.125.244.132 (74.125.244.132)  28.407 ms  23.801 ms  24.186 ms
10  216.239.48.163 (216.239.48.163)  27.965 ms 72.14.232.85 (72.14.232.85)  31.553 ms  32.977 ms
11  142.251.61.221 (142.251.61.221)  27.736 ms 216.239.56.101 (216.239.56.101)  26.793 ms 172.253.79.113 (172.253.79.113)  29.281 ms
12  * 209.85.251.41 (209.85.251.41)  34.343 ms *
13  * * *
14  * * *
15  * * *
16  * * *
17  * * *
18  * * *
19  * * *
20  * * *
21  dns.google (8.8.8.8)  65.244 ms  65.952 ms  69.032 ms
traceroute to 8.8.8.8 (8.8.8.8), 30 hops max, 60 byte packets
 1  * * *
 2  * * *
 3  * * *
 4  192.168.100.1 (192.168.100.1)  3.768 ms  4.352 ms  5.419 ms
 5  mrsk-bras5.sz.ip.rostelecom.ru (212.48.195.203)  42.516 ms  42.152 ms  41.947 ms
 6  pos14-0-0-s16.E320-1-VLGD.nwtelecom.ru (212.48.194.218)  17.290 ms 212.48.194.212 (212.48.194.212)  15.150 ms  14.819 ms
 7  188.254.2.4 (188.254.2.4)  30.486 ms 188.254.2.6 (188.254.2.6)  32.238 ms  31.602 ms
 8  87.226.194.47 (87.226.194.47)  31.375 ms  32.023 ms  24.889 ms
 9  74.125.244.132 (74.125.244.132)  25.204 ms  24.928 ms 74.125.244.180 (74.125.244.180)  36.346 ms
10  72.14.232.85 (72.14.232.85)  25.371 ms  26.499 ms 216.239.48.163 (216.239.48.163)  31.969 ms
11  142.250.210.47 (142.250.210.47)  31.483 ms 142.251.61.221 (142.251.61.221)  31.305 ms 216.239.46.139 (216.239.46.139)  32.352 ms
12  * 216.239.47.173 (216.239.47.173)  36.339 ms *
13  * * *
14  * * *
15  * * *
16  * * *
17  * * *
18  * * dns.google (8.8.8.8)  47.068 ms

```

</details>
[details --no-link]:[со стороны inetRouterSecond (все равно идет через inetRouter)](./027_2/files/tests-reports/inetRouterSecond - traceroute 8.8.8.8.txt)

<details><summary>см. со стороны inetRouter</summary>

```text
traceroute to 8.8.8.8 (8.8.8.8), 30 hops max, 60 byte packets
 1  gateway (10.0.2.2)  0.553 ms  0.310 ms  0.232 ms
 2  * * *
 3  * * *
 4  mrsk-bras5.sz.ip.rostelecom.ru (212.48.195.203)  16.724 ms  16.630 ms  16.689 ms
 5  pos14-0-0-s16.E320-1-VLGD.nwtelecom.ru (212.48.194.218)  16.624 ms 212.48.194.212 (212.48.194.212)  16.640 ms  16.622 ms
 6  188.254.2.6 (188.254.2.6)  45.200 ms  51.196 ms 188.254.2.4 (188.254.2.4)  50.365 ms
 7  87.226.194.47 (87.226.194.47)  49.068 ms  49.298 ms  48.762 ms
 8  74.125.244.180 (74.125.244.180)  49.138 ms  48.905 ms 74.125.244.132 (74.125.244.132)  49.180 ms
 9  72.14.232.85 (72.14.232.85)  47.944 ms 142.251.61.219 (142.251.61.219)  48.391 ms 216.239.48.163 (216.239.48.163)  27.077 ms
10  216.239.49.113 (216.239.49.113)  32.377 ms 142.251.61.221 (142.251.61.221)  32.080 ms 142.250.56.15 (142.250.56.15)  30.485 ms
11  216.239.42.23 (216.239.42.23)  32.510 ms 142.250.232.179 (142.250.232.179)  39.846 ms *
12  * * *
13  * * *
14  * * *
15  * * *
16  * * *
17  * * *
18  * * *
19  * * *
20  * * *
21  * dns.google (8.8.8.8)  36.440 ms  36.398 ms
```

</details>
    
### Тук-тук

Проверка дефолтного SSH доступа

```shell
cd ../vm
vagrant ssh centralRouter
    ssh 192.168.255.1
    # The authenticity of host '192.168.255.1 (192.168.255.1)' can't be established.
    # ECDSA key fingerprint is SHA256:N66NFgJ/P/VQ2eKrzP4kLUe0RbbzeQ/xA4rn/hHIGuw.
    # ECDSA key fingerprint is MD5:1c:0d:da:e0:59:07:f7:52:d4:bd:c4:93:06:9d:33:c1.
    # Are you sure you want to continue connecting (yes/no)? yes                    <--- yes
    # Warning: Permanently added '192.168.255.1' (ECDSA) to the list of known hosts.
    # Permission denied (publickey,gssapi-keyex,gssapi-with-mic).                   <--- omg
    exit
exit
```

Настройка парольного доступа

```shell
cd ../ansible
ansible-playbook playbooks/task_001_password_auth.yml > ../files/task_001_password_auth.txt
```


<details><summary>см. лог playbooks/task_001_password_auth.yml</summary>

```text

PLAY [Set up /etc/ssh/sshd_config PasswordAuthentication yes] ******************

TASK [Gathering Facts] *********************************************************
ok: [inetRouter]

TASK [../roles/task_001_password_auth : /etc/ssh/sshd_config | content] ********
changed: [inetRouter]

TASK [../roles/task_001_password_auth : /etc/ssh/sshd_config | PasswordAuthentication yes | if it does not set up] ***
skipping: [inetRouter]

TASK [../roles/task_001_password_auth : /etc/ssh/sshd_config | PasswordAuthentication yes | if it was set up early] ***
changed: [inetRouter]

RUNNING HANDLER [../roles/task_001_password_auth : systemctl-restart-sshd] *****
changed: [inetRouter]

PLAY RECAP *********************************************************************
inetRouter                 : ok=4    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   


```

</details>

Проверка работы парольного доступа

```shell
cd ../vm
vagrant ssh centralRouter
    ssh 192.168.255.1
    # vagrant@192.168.255.1's password: 
    # Last login: Sun Aug 29 19:48:43 2021 from 10.0.2.2
    # [vagrant@inetRouter ~]$  <-- OK
    exit
exit
```

```shell
cd ../ansible
```

Реализация тук-тук-тук на цели доступа

```shell
ansible-playbook playbooks/task_001_port_knocking_target.yml > ../files/task_001_port_knocking_target.txt
```


<details><summary>см. лог playbooks/task_001_port_knocking_target.yml</summary>

```text

PLAY [Configure port-knocking target] ******************************************

TASK [Gathering Facts] *********************************************************
ok: [inetRouter]

TASK [../roles/task_001_port_knocking_target : Copy port-knocking rules file] ***
changed: [inetRouter]

TASK [../roles/task_001_port_knocking_target : Apply and save port-knocking rules] ***
changed: [inetRouter]

PLAY RECAP *********************************************************************
inetRouter                 : ok=3    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   


```

</details>

ПО для "тук-тук-тук" на клиенте, осуществляющем доступ

```shell
ansible-playbook playbooks/task_001_port_knocking_client.yml > ../files/task_001_port_knocking_client.txt
```


<details><summary>см. лог playbooks/task_001_port_knocking_client.yml</summary>

```text

PLAY [Set up port-knocking client program] *************************************

TASK [Gathering Facts] *********************************************************
ok: [centralRouter]

TASK [../roles/task_001_port_knocking_client : Install Nmap] *******************
changed: [centralRouter]

TASK [../roles/task_001_port_knocking_client : Copy port knocking file for clients] ***
changed: [centralRouter]

PLAY RECAP *********************************************************************
centralRouter              : ok=3    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   


```

</details>

Проверка работоспособности "тук-тук-тук"

```shell
cd ../vm
vagrant ssh centralRouter
    ssh 192.168.255.1
    #   ssh: connect to host 192.168.255.1 port 22: Connection timed out    <--- бет тук-тук-тук не откроет
    ./port_knocking.sh  192.168.255.1 8881 7777 9991 && ssh 192.168.255.1
    #   vagrant@192.168.255.1's password:                                   <--- с тук-тук-тук открыл
    #   Last login: Sun Aug 29 22:33:38 2021 from 10.0.2.2
    #   [vagrant@inetRouter ~]$ 
    exit
exit  
```

Видоизменил [port_knocking.sh](./027_2/ansible/roles/task_001_port_knocking_client/files/port_knocking.sh)

<details><summary>см. port_knocking.sh</summary>

```shell
#!/bin/bash
# ./port_knocking.sh  192.168.255.1 8881 7777 9991 && ssh 192.168.0.1

# Проверка на переданный параметр
USAGE="SYNOPSIS: ./port_knocking.sh <TARGET_IP> <port_1> [<port_2> <port_3> ...]"
if [ -z "$1" ]
then
    echo "Sorry, there is no first parameter TARGET_IP. "
    echo $USAGE
    exit 1
fi

if [ -z "$2" ]
then
    echo "Sorry, some knock-port id needed. "
    echo $USAGE
    exit 1
fi

TARGET_IP=$1
shift
for ARG in "$@"
do
  sudo nmap -Pn --max-retries 0 -p $ARG $TARGET_IP # !! SUDO - MUST BE
#  sudo ssh -o ConnectTimeout=1 $TARGET_IP -p $ARG
done
```

</details>

Замечание:
* port_knocking.sh требует установки nmap на клиенте, а можно иными? curl? или `ssh <IP> -p <PORT>` не вышло.
* port_knocking.sh необходим sudo для nmap, поведение c/без разнится, связано с правами на локальный сокет?

Развертка nginx

```shell
cd ../ansible
ansible-playbook playbooks/task_002_nginx.yml > ../files/task_002_nginx.txt
```


<details><summary>см. лог playbooks/task_002_nginx.yml</summary>

```text

PLAY [Deploy nginx] ************************************************************

TASK [Gathering Facts] *********************************************************
ok: [centralServer]

TASK [../roles/task_002_nginx : Install EPEL Repo package from standart repo] ***
changed: [centralServer]

TASK [../roles/task_002_nginx : Install nginx] *********************************
changed: [centralServer]

TASK [../roles/task_002_nginx : Configure nginx] *******************************
changed: [centralServer]

TASK [../roles/task_002_nginx : index.html] ************************************
changed: [centralServer]

RUNNING HANDLER [../roles/task_002_nginx : start nginx] ************************
changed: [centralServer]

RUNNING HANDLER [../roles/task_002_nginx : restart nginx] **********************
changed: [centralServer]

PLAY RECAP *********************************************************************
centralServer              : ok=7    changed=6    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   


```

</details>

Проброс порта 80 --> 8080

```shell
ansible-playbook playbooks/task_002_port_forwarding.yml > ../files/playbooks_task_002_port_forwarding.txt
```


<details><summary>см. лог playbooks/task_002_port_forwarding.yml</summary>

```text

PLAY [Configure port forwarding] ***********************************************

TASK [Gathering Facts] *********************************************************
ok: [inetRouterSecond]

TASK [../roles/task_002_port_forwarding : iptables dnat] ***********************
changed: [inetRouterSecond]

TASK [../roles/task_002_port_forwarding : iptables dnat] ***********************
changed: [inetRouterSecond]

PLAY RECAP *********************************************************************
inetRouterSecond           : ok=3    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   


```

</details>

Проверка работы 192.168.0.2:80 внутри сети

```shell
ansible-playbook playbooks/test_003_http_connectivity.yml > ../files/test_003_http_connectivity.txt
```


<details><summary>см. лог playbooks/test_003_http_connectivity.yml</summary>

```text

PLAY [Playbook of internal http connectivity tests] ****************************

TASK [Gathering Facts] *********************************************************
ok: [inetRouterSecond]
ok: [centralServer]
ok: [centralRouter]
fatal: [inetRouter]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: ssh: connect to host 127.0.0.1 port 2222: Connection timed out", "unreachable": true}

TASK [../roles/test_003_http_connectivity : test | http | curl] ****************
changed: [inetRouterSecond]
changed: [centralRouter]
changed: [centralServer]

TASK [../roles/test_003_http_connectivity : test | http | index page content] ***
ok: [inetRouterSecond] => {
    "msg": "Hello from centralServer"
}
ok: [centralRouter] => {
    "msg": "Hello from centralServer"
}
ok: [centralServer] => {
    "msg": "Hello from centralServer"
}

PLAY RECAP *********************************************************************
centralRouter              : ok=3    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
centralServer              : ok=3    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
inetRouter                 : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
inetRouterSecond           : ok=3    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   


```

</details>

Проверка работы 8080 извне сети

```shell
cd ../vm
curl -I 127.0.0.1:8080 > ../files/curl_localhost_8080.md
curl 127.0.0.1:8080 >> ../files/curl_localhost_8080.md
```

[details --no-link]:[`curl 127.0.0.1:8080`](./027_2/files/curl_localhost.md)
