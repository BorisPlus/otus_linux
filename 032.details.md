# DNS

* взять стенд https://github.com/erlong15/vagrant-bind
* добавить еще один сервер client2
* завести в зоне dns.lab имена
  * web1 - смотрит на клиент1
  * web2  смотрит на клиент2
* завести еще одну зону newdns.lab
  * завести в ней запись
  * www - смотрит на обоих клиентов
* настроить split-dns
  * клиент1 - видит обе зоны, но в зоне dns.lab только web1
  * клиент2 видит только dns.lab
* настроить все без выключения selinux

## Исполнение

```shell
cd 031/vm/
cd ../vm/
vagrant destroy -f && vagrant up 
python3 v2a.py -o ../ansible/inventories/hosts # Это уже как кредо
cd ../ansible/
ansible-playbook playbooks/deploy.yml > ../files/deploy.yml.txt
```

[details --no-link]:[лог `playbooks/deploy.yml`](./031/files/deploy.yml.txt)

## Демонстрация работоспособности

На каждом хосте будет запущен список комманд на проверку доступности [details]:[зон и хостов](./031/ansible/playbooks/check.yml).

```shell
ansible-playbook playbooks/check.yml > ../files/check.yml.txt
```

[details --no-link]:[лог исполнения `playbooks/check.yml`](./031/files/check.yml.txt)



## На потом

А чем `nslookup` лучше/хуже `dig`:

```shell
nslookup www.dns.lab 192.168.50.10

  Server:		192.168.50.10
  Address:	192.168.50.10#53
  
  ** server can't find www.dns.lab: NXDOMAIN

nslookup www.newdns.lab 192.168.50.10
  
  Server:		192.168.50.10
  Address:	192.168.50.10#53
  
  Name:	www.newdns.lab
  Address: 192.168.50.16
  Name:	www.newdns.lab
  Address: 192.168.50.15

```

